!function(){define("utils/query_param",[],function(){"use strict";return function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}}),define("jqueryui/widget",["jquery"],function(e){return function(e,t){var n=0,i=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(r){}s(t)},e.widget=function(t,n,i){var s,r,a,o,l={},u=t.split(".")[0];t=t.split(".")[1],s=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[u]=e[u]||{},r=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},s=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=s,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),a.prototype=e.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||t:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:s}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var s,r,a=i.call(arguments,1),o=0,l=a.length;l>o;o++)for(s in a[o])r=a[o][s],a[o].hasOwnProperty(s)&&r!==t&&(n[s]=e.isPlainObject(r)?e.isPlainObject(n[s])?e.widget.extend({},n[s],r):e.widget.extend({},r):r);return n},e.widget.bridge=function(n,s){var r=s.prototype.widgetFullName||n;e.fn[n]=function(a){var o="string"==typeof a,l=i.call(arguments,1),u=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,this.each(o?function(){var i,s=e.data(this,r);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(i=s[a].apply(s,l),i!==s&&i!==t?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new s(a,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,r,a,o=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(o={},s=n.split("."),n=s.shift(),s.length){for(r=o[n]=e.widget.extend({},this.options[n]),a=0;a<s.length-1;a++)r[s[a]]=r[s[a]]||{},r=r[s[a]];if(n=s.pop(),1===arguments.length)return r[n]===t?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var s,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=s=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),e.each(i,function(i,a){function o(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?s.delegate(c,u,o):n.bind(u,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var s,r,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,s,r){"string"==typeof s&&(s={effect:s});var a,o=s?s===!0||"number"==typeof s?n:s.effect||n:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),a&&e.effects&&e.effects.effect[o]?i[t](s):o!==t&&i[o]?i[o](s.duration,s.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}})}(e),e}),define("widgets/ad",["lodash","jquery","jqueryui/widget"],function(e,t){"use strict";t.widget("ted.ad",{_rendered:!1,$image:null,$text:null,$link:null,blocked:function(){this.element.hide()},refreshJsonAd:function(){if(this.options.blocked)return void this.blocked();if(this._rendered||(this._addAdClass(),this.element.html(""),this.options.ad.houseAd||this._getAppreciationText().appendTo(this.element),this.$link=t('<a class="ad__unit" href="#" rel="nofollow" target="_blank">').appendTo(this.element),this.$image=t("<img>").appendTo(this.$link),this._rendered=!0),!this.options.ad)return void this.element.hide();var e=this._getRenderDetails();this.$link.attr("href",e.click),this.$image.attr({src:e.currentCreative.url,width:e.dimensions.width,height:e.dimensions.height}),this.element[this.options.ad.hasDisplay===!1?"hide":"show"](),this._impress()},refreshHtmlAd:function(){this._addAdClass(),this._getAppreciationText().prependTo(this.element)},_init:function(){this._rendered=!1,"json"==this.options.mode?this.refreshJsonAd():"html"==this.options.mode&&this.refreshHtmlAd()},_fireImpression:function(e){var t=new Image;t.src=e},_impress:function(){this._fireImpression(this.options.ad.impression),e.forEach(this.options.ad.thirdPartyImpressions,this._fireImpression)},_getCreative:function(){var t=e.filter(this.options.ad.creative,function(e){return""!==e.url}),n=Math.max(window.devicePixelRatio||1,1);return e.reduce(t,function(e,t){return t.density<=n?t:e||t},{})},_getRenderDetails:function(){return e.extend({currentCreative:this._getCreative()},this.options.ad)},_getAppreciationText:function(){return this.$text=t('<div class="ad__text">TED Talks are free thanks to support from</div>'),this.$text},_addAdClass:function(){this.element.addClass("ad")}})}),define("hbs/handlebars",[],function(){var e=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof a?e.toString():e||0===e?(e=""+e,u.test(e)?e.replace(l,t):e):""}function s(e){return e||0===e?p(e)&&0===e.length?!0:!1:!0}var r={},a=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=n;var c=Object.prototype.toString;r.toString=c;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var h;r.isFunction=h;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===c.call(e):!1};return r.isArray=p,r.escapeExpression=i,r.isEmpty=s,r}(e),n=function(){"use strict";function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var s=Error.prototype.constructor.call(this,e),r=0;r<n.length;r++)this[n[r]]=s[n[r]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},s=n.fn;return p(t)&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?i(this):h(t)?t.length>0?e.helpers.each(t,n):i(this):s(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,s=t.inverse,r=0,a="";if(p(e)&&(e=e.call(this)),t.data&&(n=m(t.data)),e&&"object"==typeof e)if(h(e))for(var o=e.length;o>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===e.length-1),a+=i(e[r],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=r,n.first=0===r),a+=i(e[l],{data:n}),r++);return 0===r&&(a=s(this)),a}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return p(e)&&(e=e.call(this)),a.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function s(e,t){g.log(e,t)}var r={},a=e,o=t,l="1.3.0";r.VERSION=l;var u=4;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=c;var h=a.isArray,p=a.isFunction,d=a.toString,f="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:s,registerHelper:function(e,t,n){if(d.call(e)===f){if(n||t)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){d.call(e)===f?a.extend(this.partials,e):this.partials[e]=t}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(g.level<=e){var n=g.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};r.logger=g,r.log=s;var m=function(e){var t={};return a.extend(t,e),t};return r.createFrame=m,r}(t,n),s=function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var i=d[n],s=d[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function s(e,t){if(!t)throw new h("No environment passed to template");var n=function(e,n,i,s,r,a){var o=t.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(t.compile){var l={helpers:s,partials:r,data:a};return r[n]=t.compile(e,{data:void 0!==a},t),r[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=a(e,t,n):i||(i=this.programs[e]=a(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,s){s=s||{};var r,a,o=s.partial?s:t;s.partial||(r=s.helpers,a=s.partials);var l=e.call(i,o,n,r,a,s.data);return s.partial||t.VM.checkRevision(i.compilerInfo),l}}function r(e,t,n){var i=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||n].concat(i))};return s.program=e,s.depth=i.length,s}function a(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,s,r){var a={partial:!0,helpers:i,partials:s,data:r};if(void 0===e)throw new h("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function l(){return""}var u={},c=e,h=t,p=n.COMPILER_REVISION,d=n.REVISION_CHANGES;return u.checkRevision=i,u.template=s,u.programWithDepth=r,u.program=a,u.invokePartial=o,u.noop=l,u}(t,n,i),r=function(e,t,n,i,s){"use strict";var r,a=e,o=t,l=n,u=i,c=s,h=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=o,e.Exception=l,e.Utils=u,e.VM=c,e.template=function(t){return c.template(t,e)},e},p=h();return p.create=h,r=p}(i,e,n,t,s),a=function(e){"use strict";function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,s={ProgramNode:function(e,n,i,r){var a,o;3===arguments.length?(r=i,i=null):2===arguments.length&&(r=n,n=null),t.call(this,r),this.type="program",this.statements=e,this.strip={},i?(o=i[0],o?(a={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new s.ProgramNode(i,n,a)):this.inverse=new s.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,i,r,a){if(t.call(this,a),this.type="mustache",this.strip=r,null!=i&&i.charAt){var o=i.charAt(3)||i.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!i;this.sexpr=e instanceof s.SexprNode?e:new s.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var s=this.id=e[0],r=this.params=e.slice(1),a=this.eligibleHelper=s.isSimple;this.isHelper=a&&(r.length||n)},PartialNode:function(e,n,i,s){t.call(this,s),this.type="partial",this.partialName=e,this.context=n,this.strip=i},BlockNode:function(e,n,s,r,a){if(t.call(this,a),e.sexpr.id.original!==r.path.original)throw new i(e.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=s,this.strip={left:e.strip.left,right:r.strip.right},(n||s).strip.left=e.strip.right,(s||n).strip.right=r.strip.left,s&&!n&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var s="",r=[],a=0,o=0,l=e.length;l>o;o++){var u=e[o].part;if(s+=(e[o].separator||"")+u,".."===u||"."===u||"this"===u){if(r.length>0)throw new i("Invalid path: "+s,this);".."===u?a++:this.isScoped=!0}else r.push(u)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=a,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return n=s}(n),o=function(){"use strict";var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,i,s,r,a){var o=a.length-1;switch(r){case 1:return new s.ProgramNode(a[o-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],a[o-1],a[o],this._$);break;case 4:this.$=new s.ProgramNode(a[o-2],a[o-1],a[o],this._$);break;case 5:this.$=new s.ProgramNode(a[o-1],a[o],[],this._$);break;case 6:this.$=new s.ProgramNode(a[o],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new s.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o],this._$);break;case 12:this.$=new s.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o],this._$);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new s.ContentNode(a[o],this._$);break;case 16:this.$=new s.CommentNode(a[o],this._$);break;case 17:this.$=new s.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 18:this.$=new s.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 19:this.$={path:a[o-1],strip:e(a[o-2],a[o])};break;case 20:this.$=new s.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 21:this.$=new s.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 22:this.$=new s.PartialNode(a[o-2],a[o-1],e(a[o-3],a[o]),this._$);break;case 23:this.$=e(a[o-1],a[o]);break;case 24:this.$=new s.SexprNode([a[o-2]].concat(a[o-1]),a[o],this._$);break;case 25:this.$=new s.SexprNode([a[o]],null,this._$);break;case 26:this.$=a[o];break;case 27:this.$=new s.StringNode(a[o],this._$);break;case 28:this.$=new s.IntegerNode(a[o],this._$);break;case 29:this.$=new s.BooleanNode(a[o],this._$);break;case 30:this.$=a[o];break;case 31:a[o-1].isHelper=!0,this.$=a[o-1];break;case 32:this.$=new s.HashNode(a[o],this._$);break;case 33:this.$=[a[o-2],a[o]];break;case 34:this.$=new s.PartialNameNode(a[o],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(a[o],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(a[o],this._$));break;case 37:this.$=new s.DataNode(a[o],this._$);break;case 38:this.$=new s.IdNode(a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 47:this.$=[a[o]];break;case 48:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],s=[null],r=[],a=this.table,o="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,g,m,_,v,b,y,k,E={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===d||"undefined"==typeof d)&&(d=t()),m=a[g]&&a[g][d]),"undefined"==typeof m||!m.length||!m[0]){var w="";if(!c){k=[];for(v in a[g])this.terminals_[v]&&v>2&&k.push("'"+this.terminals_[v]+"'");w=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:k})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+d);switch(m[0]){case 1:i.push(d),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),d=null,f?(d=f,f=null):(u=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[m[1]][1],E.$=s[s.length-b],E._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},p&&(E._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),_=this.performAction.call(E,o,u,l,this.yy,m[1],s,r),"undefined"!=typeof _)return _;b&&(i=i.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),s.push(E.$),r.push(E._$),y=a[i[i.length-2]][i[i.length-1]],i.push(y);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(n=this._input.match(this.rules[r[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function s(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;
case 22:return this.popState(),18;case 23:return t.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){"use strict";function n(e){return e.constructor===r.ProgramNode?e:(s.yy=r,s.parse(e))}var i={},s=e,r=t;return i.parser=s,i.parse=n,i}(o,a),u=function(e){"use strict";function t(){}function n(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=n.parse(e),s=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(s,t)}function i(e,t,n){function i(){var i=n.parse(e),s=(new n.Compiler).compile(i,t),r=(new n.JavaScriptCompiler).compile(s,t,void 0,!0);return n.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var s;return function(e,t){return s||(s=i()),s.call(this,e,t)}}var s={},r=e;return s.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,n,i=this.opcodes,s=[],r=0,a=i.length;a>r;r++)if(e=i[r],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],s=e.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==s.args[r])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,r=n.depths.list.length;r>s;s++)t=n.depths.list[s],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=t.sexpr,r=this.classifySexpr(s);"helper"===r?this.helperSexpr(s,n,i):"simple"===r?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var s=0,r=i.length;r>s;s++)t=i[s],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,n){var i=e.id,s=i.parts[0],r=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+s,e);this.opcode("invokeHelper",i.length,s,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var s=e.id.parts[0];i.knownHelpers[s]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},s.precompile=n,s.compile=i,s}(n),c=function(e,t){"use strict";function n(e){this.value=e}function i(){}var s,r=e.COMPILER_REVISION,a=e.REVISION_CHANGES,o=e.log,l=t;i.prototype={nameLookup:function(e,t){var n,s;return 0===e.indexOf("depth")&&(n=!0),s=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+s+")":s},compilerInfo:function(){var e=r,t=a[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var s,r=e.opcodes;this.i=0;for(var a=r.length;this.i<a;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)i.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),e)return i.push(a),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return o("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),s=this.nameLookup("depth"+this.lastContext,t,"context"),r="helper = "+i.name+" || "+s;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),r=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+r+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),n&&s.types.push("'"+e+"': "+n),s.values.push("'"+e+"': ("+i+")")},compiler:i,compileChildren:function(e,t){for(var n,i,s=e.children,r=0,a=s.length;a>r;r++){n=s[r],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,s=[n.index,n.name,"data"],r=0,a=i.length;a>r;r++)t=i[r],s.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,s,r="",a=this.isInline();if(a){var o=this.popStack(!0);if(o instanceof n)t=o.value,s=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var u=e.call(this,t);return a?(s||this.popStack(),i&&this.stackSlot--,this.push("("+r+u+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+r+u+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var s=e[t];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof n?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],s=this.setupParams(e,i,n),r=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:s,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n,i,s,r=[],a=[],o=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+s));for(var l=0;e>l;l++)n=this.popStack(),t.push(n),this.options.stringParams&&(o.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+a.join(",")+"]"),r.push("types:["+o.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},h=0,p=u.length;p>h;h++)c[u[h]]=!0;return i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},s=i}(i,n),h=function(e,t,n,i,s){"use strict";var r,a=e,o=t,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,p=i.precompile,d=s,f=a.create,g=function(){var e=f();return e.compile=function(t,n){return h(t,n,e)},e.precompile=function(t,n){return p(t,n,e)},e.AST=o,e.Compiler=c,e.JavaScriptCompiler=d,e.Parser=l,e.parse=u,e};return a=g(),a.create=g,r=a}(r,a,l,u,c);return h}();return e}),define("hbs/underscore",{}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(e,t){function n(i,s,r){return r=r||{},s=s||{},i&&"program"===i.type&&i.statements&&(t(i.statements).forEach(function(t,a){var o="<!-- i18n error -->";if("mustache"===t.type&&t.id&&"$"===t.id.original){if(t.params.length&&t.params[0].string){var l=t.params[0].string;o=s[l]||(r.originalKeyFallback?l:o)}i.statements[a]=new e.AST.ContentNode(o)}else t.program&&(t.program=n(t.program,s,r))}),i.inverse&&n(i.inverse,s,r)),i}return function(t,i,s){s=s||{};var r,a;return r=e.parse(t),i!==!1&&(r=n(r,i,s)),a=(new e.Compiler).compile(r,s),(new e.JavaScriptCompiler).compile(a,s)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,s,r,a,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)a[n]=str(n,l)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],s=str(i,l),s&&a.push(quote(i)+(gap?": ":":")+s));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(s=str(i,l),s&&a.push(quote(i)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,s=e[t];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(e,t,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("hbs!templates/sponsorshipBug",["hbs","hbs/handlebars"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i="";return i+='\n\n<a class="sponsorship-bug__link media" href="#" rel="nofollow" target="_blank">\n  <div class="sponsorship-bug__image media__image media__image--alt">\n    <img src="" alt="">\n  </div>\n  <div class="sponsorship-bug__message media__message">\n    TED Talks are free<br>\n    thanks to support from\n  </div>\n</a>\n'});return n}),define("templates/helpers/assetUrl",["Handlebars"],function(e){"use strict";function t(e){return TED.assetHost+e}return e.registerHelper("assetUrl",t),t}),define("hbs!templates/sponsorshipBugBlocked",["hbs","hbs/handlebars","templates/helpers/assetUrl"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i,s,r="",a=n.helperMissing,o=this.escapeExpression;return r+='\n\n<a class="sponsorship-bug__nag" href="http://support.ted.com/customer/portal/articles/1532436-how-can-i-support-ted-by-modifying-my-ad-blocker-settings" target="_blank">\n  <img class="sponsorship-bug__nag__image" src="'+o((i=n.assetUrl||t&&t.assetUrl,s={hash:{}},i?i.call(t,"/temp/ad-blocker-bug.png",s):a.call(t,"assetUrl","/temp/ad-blocker-bug.png",s)))+'" alt="Show your support by unblocking ted.com from ad blockers">\n</a>\n'});return n}),define("widgets/sponsorshipBug",["jquery","hbs!templates/sponsorshipBug","hbs!templates/sponsorshipBugBlocked","widgets/ad"],function(e,t,n){"use strict";e.widget("ted.sponsorshipBug",e.ted.ad,{blocked:function(){this.element.html(n()),this.element.show(),this._rendered=!1},refreshJsonAd:function(){return this.options.blocked?this.blocked():(this._rendered||(this.element.html(t()),this.$image=this.element.find("img"),this.$link=this.element.find("a.sponsorship-bug__link"),this._rendered=!0),void this._super())},_init:function(){this.element.addClass("sponsorship-bug"),this._super()}})}),define("lib/ads",["jquery","lodash","utils/query_param","widgets/ad","widgets/sponsorshipBug"],function(e,t,n){"use strict";function i(t){var n=c[t.type];"master"==t.type?h.deferred.resolve(t):void 0===n?window.console&&console.log&&(console.log("Unknown ad type"),console.log(t)):e(n.id)[n.widget]({ad:t,mode:"json"})}function s(n){t.forEach(h.companionAdSlots,function(t){if(t.gptSlot.setTargeting(t.key,n.target),t.displayed){var i=e("#"+t.containerId);i.data("tedAd")?i.ad("destroy"):i.data("sponsorshipBug")&&i.sponsorshipBug("destroy"),p.refreshAd(t.gptSlot)}else p.displayAd(t.containerId);t.displayed=!0}),l(n.impression)}function r(e){p.player.player("sendAds",{postroll:a(e.postrollURL),preroll:a(e.prerollURL)})}function a(e){return e.replace("{adUnit}",h.slot.adUnit)}function o(t){var n=p.player=t;if(n){var a=p.playerMode=n.player("mode");if("hls"==a)n.on({playerad:function(e,t){i(t.ad)}});else{h.deferred.done(s),n.on({playeradblock:function(){var t=c.bug;e(t.id)[t.widget]({blocked:!0})}});var o=!0;n.on({playertalk:function(e,t){o&&n.player("talks")[0].id==t.id?(o=!1,"flash"==a&&h.deferred.done(r)):p.refreshMasterAd({targeting:t.targeting}),o=!1}})}}}function l(e){var t=new Image;t.src=e}function u(){t.forEach(h.slot.targeting,function(e,n){h.slot.gptSlot.setTargeting(n,t.isArray(e)?e.join(","):e)});var e=n("dfptest");e&&h.slot.gptSlot.setTargeting("dfptest",e)}var c,h={companionAdSlots:[],deferred:e.Deferred(),slot:{adUnit:null,containerId:null,gptSlot:null,targeting:{}}},p={player:null};return window.googletag=window.googletag||{cmd:[]},c={bug:{id:"#sponsorship-bug-placeholder",widget:"sponsorshipBug"},companion:{id:"#ad-unit",widget:"ad"},"companion-mobile":{id:"#ad-unit-mobile",widget:"ad"},devil:{id:"#devil-ad",widget:"ad"},onPage:{id:"#ad-unit",widget:"ad"}},window.googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(n){var i=t.find(h.companionAdSlots,function(e){return e.gptSlot==n.slot});if(i&&"ad-unit"==i.containerId&&!n.isEmpty){var s=e("#ad-unit"),r=s.data("tedAd");r||s.ad({mode:"html"})}})}),p.displayMasterAd=function(e){h.slot.containerId=e.containerId,h.slot.adUnit=e.adUnit,window.googletag.cmd.push(function(){h.slot.gptSlot=googletag.defineOutOfPageSlot(h.slot.adUnit,h.slot.containerId).addService(googletag.pubads()),t.assign(h.slot.targeting,e.targeting),u(),p.displayAd(h.slot.containerId)})},p.refreshMasterAd=function(n){"hls"!=p.playerMode&&(h.deferred=e.Deferred(),h.deferred.done(s),"flash"==p.playerMode&&h.deferred.done(r),h.slot.gptSlot.clearTargeting(),t.forEach(h.companionAdSlots,function(e){e.gptSlot.clearTargeting()}),t.assign(h.slot.targeting,n.targeting),u(),p.refreshAd(h.slot.gptSlot))},p.displayAd=function(t){e(function(){window.googletag.cmd.push(function(){googletag.display(t)})})},p.refreshAd=function(e){window.googletag.cmd.push(function(){googletag.pubads().refresh([e])})},p.createCompanionSlot=function(e){window.googletag.cmd.push(function(){var t=googletag.defineSlot(e.adUnit,e.size,e.containerId).addService(googletag.pubads());h.companionAdSlots.push({containerId:e.containerId,gptSlot:t,key:e.key})})},p.initPlayer=o,p.gptAd=function(e){i(e.ad)},p}),define("hbs!apps/embeddable/templates/error",["hbs","hbs/handlebars"],function(e,t){var n=t.template(function(e,t,n,i,s){function r(){return"\n        Sorry:\n        we can't play video on this browser.\n        Please make sure it's up to date\n        and that Flash 11.1 or higher is installed.\n      "}function a(){return"\n        We're sorry:\n        video playback cannot be initialized\n        on your browser at this time.\n      "}function o(){return"\n        We're sorry:\n        video playback has been interrupted.\n        You may need to refresh the page\n        to resume.\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var l,u,c="",h=this,p="function",d=this.escapeExpression;return c+='\n\n<div class="Embeddable__error vc inverse">\n  <div class="vc__wrap">\n    <div class="Embeddable__error__message">\n      ',l=n["if"].call(t,t&&t.isClient,{hash:{},inverse:h.noop,fn:h.program(1,r,s)}),(l||0===l)&&(c+=l),c+="\n\n      ",l=n["if"].call(t,t&&t.isInit,{hash:{},inverse:h.noop,fn:h.program(3,a,s)}),(l||0===l)&&(c+=l),c+="\n\n      ",l=n["if"].call(t,t&&t.isFatal,{hash:{},inverse:h.noop,fn:h.program(5,o,s)}),(l||0===l)&&(c+=l),c+='\n\n      <a href="',(u=n.url)?l=u.call(t,{hash:{}}):(u=t&&t.url,l=typeof u===p?u.call(t,{hash:{}}):u),c+=d(l)+'" target="_blank">Load this talk on ted.com</a>\n    </div>\n  </div>\n</div>\n'});return n}),function(e,t){"undefined"!=typeof exports?t(e,exports,require("underscore")):"function"==typeof define&&define.amd?define("Backbone",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var s=e.Backbone,r=[],a=r.push,o=r.slice,l=r.splice;t.VERSION="1.0.0",t.$=i,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!h(this,"once",e,[t,i])||!t)return this;var s=this,r=n.once(function(){s.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var s,r,a,o,l,u,c,p;if(!this._events||!h(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(o=e?[e]:n.keys(this._events),l=0,u=o.length;u>l;l++)if(e=o[l],a=this._events[e]){if(this._events[e]=s=[],t||i)for(c=0,p=a.length;p>c;c++)r=a[c],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&p(n,t),i&&p(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var s=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var r in i)i[r].off(t,n,this),s&&delete this._listeners[r];return this}},c=/\s+/,h=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),a=0,o=r.length;o>a;a++)e[t].apply(e,[r[a]].concat(i));return!1}return!0},p=function(e,t){var n,i=-1,s=e.length,r=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,a,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)
}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(e,t){u[t]=function(t,i,s){var r=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=n.uniqueId("l"));return r[a]=t,"object"==typeof i&&(s=this),t[e](i,s,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(t,u);var f=t.Model=function(e,t){var i,s=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},n.extend(this,n.pick(t,g)),t.parse&&(s=this.parse(s,t)||{}),(i=n.result(this,"defaults"))&&(s=n.defaults({},s,i)),this.set(s,t),this.changed={},this.initialize.apply(this,arguments)},g=["url","urlRoot","collection"];n.extend(f.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var s,r,a,o,l,u,c,h;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;a=i.unset,l=i.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)t=r[s],n.isEqual(h[s],t)||o.push(s),n.isEqual(c[s],t)?delete this.changed[s]:this.changed[s]=t,a?delete h[s]:h[s]=t;if(!l){o.length&&(this._pending=!0);for(var p=0,d=o.length;d>p;p++)this.trigger("change:"+o[p],this,h[o[p]],i)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(s[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},U(this,e),this.sync("read",this,e)},save:function(e,t,i){var s,r,a,o=this.attributes;if(null==e||"object"==typeof e?(s=e,i=t):(s={})[e]=t,!(!s||i&&i.wait||this.set(s,i)))return!1;if(i=n.extend({validate:!0},i),!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},o,s)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(e){l.attributes=o;var t=l.parse(e,i);return i.wait&&(t=n.extend(s||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(u&&u(l,e,i),void l.trigger("sync",l,e,i))},U(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=s),a=this.sync(r,this,i),s&&i.wait&&(this.attributes=o),a},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&s(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;U(this,e);var r=this.sync("delete",this,e);return e.wait||s(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t||{},{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var _=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};n.extend(_.prototype,u,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.defaults(t||{},b))},remove:function(e,t){e=n.isArray(e)?e.slice():[e],t||(t={});var i,s,r,a;for(i=0,s=e.length;s>i;i++)a=this.get(e[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},set:function(e,t){t=n.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),n.isArray(e)||(e=e?[e]:[]);var i,s,r,o,u,c=t.at,h=this.comparator&&null==c&&t.sort!==!1,p=n.isString(this.comparator)?this.comparator:null,d=[],f=[],g={};for(i=0,s=e.length;s>i;i++)(r=this._prepareModel(e[i],t))&&((o=this.get(r))?(t.remove&&(g[o.cid]=!0),t.merge&&(o.set(r.attributes,t),h&&!u&&o.hasChanged(p)&&(u=!0))):t.add&&(d.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(i=0,s=this.length;s>i;++i)g[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,t)}if(d.length&&(h&&(u=!0),this.length+=d.length,null!=c?l.apply(this.models,[c,0].concat(d)):a.apply(this.models,d)),u&&this.sort({silent:!0}),t.silent)return this;for(i=0,s=d.length;s>i;i++)(r=d[i]).trigger("add",r,this,t);return u&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,i){t||(t=this.comparator);var s=n.isFunction(t)?t:function(e){return e.get(t)};return n.sortedIndex(this.models,e,s,i)},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},U(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,s=t.success;return t.success=function(n){t.wait&&i.add(e,t),s&&s(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(y,function(e){_.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var k=["groupBy","countBy","sortBy"];n.each(k,function(e){_.prototype[e]=function(t,i){var s=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,s,i)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var s=t.match(w),r=s[1],a=s[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,i):this.$el.on(r,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=n.extend({},n.result(this,"options"),e)),n.extend(this,n.pick(e,S)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var r=x[e];n.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=n.result(i,"url")||F()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"!==a.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(n.extend(a,s));return i.trigger("request",i,l,s),l};var x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,A=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,u,{initialize:function(){},route:function(e,i,s){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return t.history.route(e,function(n){var a=r._extractParameters(e,n);s&&s.apply(r,a),r.trigger.apply(r,["route:"+i].concat(a)),r.trigger("route",i,a),t.history.trigger("route",r,i,a)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(I,"\\$&").replace(P,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e){return e?decodeURIComponent(e):null})}});var N=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,L=/msie [\w.]+/,R=/\/$/;N.started=!1,n.extend(N.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(R,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(O,"")},start:function(e){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=n.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,r=L.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(D,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!N.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new N;var M=function(e,t){var i,s=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,t);var r=function(){this.constructor=i};return r.prototype=s.prototype,i.prototype=new r,e&&n.extend(i.prototype,e),i.__super__=s.prototype,i};f.extend=_.extend=T.extend=E.extend=N.extend=M;var F=function(){throw new Error('A "url" property or function must be specified')},U=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("apps/embeddable/models/talk",["Backbone"],function(e){"use strict";var t=e.Model.extend({toPlayer:function(){var e=this.toJSON();return{id:e.id,resources:{hls:{stream:e.resources.hls.stream,adUrl:e.resources.hls.adUrl},h264:[{file:e.resources.h264[0].file}]},duration:e.duration,introDuration:e.introDuration,adDuration:e.adDuration,nativeLanguage:e.nativeLanguage,languages:_.map(e.languages,function(e){return{langaugeName:e.languageName,languageCode:e.languageCode,isRtl:e.isRtl}})}}});return t}),define("apps/embeddable/collections/talks",["lodash","Backbone","apps/embeddable/models/talk"],function(e,t,n){"use strict";var i=t.Collection.extend({model:n,before:function(e){return this.at(this.indexOf(e)-1)},after:function(e){return this.at(this.indexOf(e)+1)},toPlayer:function(){return this.map(function(e){return e.toPlayer()})}});return i}),define("views/mixins/cached-find",["exports"],function(e){"use strict";e._findEls=null,e.find=function(e){if(this._findEls||(this._findEls={}),this._findEls[e])return this._findEls[e];var t=this.$el.find(e);return t.length&&(this._findEls[e]=t),t}}),define("apps/embeddable/views/base",["lodash","Backbone","views/mixins/cached-find"],function(e,t,n){"use strict";var i=t.View.extend({propsDefaults:null,stateDefaults:null,propsEvents:null,stateEvents:null,adoptView:function(t){e.extend(this.propsDefaults,t.prototype.propsDefaults),e.extend(this.stateDefaults,t.prototype.stateDefaults),e.extend(this.propsEvents,t.prototype.propsEvents),e.extend(this.stateEvents,t.prototype.stateEvents)},initialize:function(){this.initializeState(),this.initializeProps()},initializeProps:function(){this.props=this._eventModel(this.propsDefaults,this.propsEvents)},initializeState:function(){this.state=this._eventModel(this.stateDefaults,this.stateEvents)},toggleClass:function(e,t,n){this.find(e)[n?"addClass":"removeClass"](t)},_eventModel:function(n,i){if(!n)return!1;var s=new t.Model(n),r=this;return e.forOwn(i,function(t,n){e.isString(t)&&(t=r[t]);var i=n.split(":");"on"===i[0]&&(n="change:"+i[1],t=e.wrap(t,function(e,t,n){n&&e.call(r)})),r.listenTo(s,n,t)}),s}});return e.extend(i.prototype,n),i}),define("apps/embeddable/utils/toggle-class",[],function(){"use strict";return function(e,t){return function(n,i){this.toggleClass(e,t,i)}}}),define("apps/embeddable/utils/untoggle-class",[],function(){"use strict";return function(e,t){return function(n,i){this.toggleClass(e,t,!i)}}}),define("utils/formatDuration",[],function(){"use strict";function e(e){return(e>9?"":"0")+e}return function(t){var n=t%60|0,i=t/3600|0,s=t%3600/60|0;return(i?i+":"+e(s):s)+":"+e(n)}}),define("templates/helpers/icon",["Handlebars"],function(e){"use strict";function t(e,t,i){return e=n(e),t=n(t),i=n(i),'<i class="icon icon_'+e+" "+(i||"")+'">'+(t?"<span class=screen-reader-text>"+t+"</span>":"")+"</i>"}var n=e.Utils.escapeExpression;return e.registerHelper("icon",function(n,i,s){return new e.SafeString(t(n,i,s))}),t}),define("hbs!apps/embeddable/templates/controls",["hbs","hbs/handlebars","templates/helpers/icon"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i,s,r="",a=n.helperMissing,o=this.escapeExpression;return r+='\n\n<div class="Embeddable__controls__bar">\n  <a class="Embeddable__button Embeddable__controls__unskip" href="#">\n    '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-unskip","Previous talk","Embeddable__button__icon",s):a.call(t,"icon","control-unskip","Previous talk","Embeddable__button__icon",s)))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__play" href="#">\n    '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-play","Play","Embeddable__button__icon",s):a.call(t,"icon","control-play","Play","Embeddable__button__icon",s)))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__pause" href="#">\n    '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-pause","Pause","Embeddable__button__icon",s):a.call(t,"icon","control-pause","Pause","Embeddable__button__icon",s)))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__skip" href="#">\n    '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-skip","Next talk","Embeddable__button__icon",s):a.call(t,"icon","control-skip","Next talk","Embeddable__button__icon",s)))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__volume" href="#">\n    '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-volume","Volume","Embeddable__button__icon",s):a.call(t,"icon","control-volume","Volume","Embeddable__button__icon",s)))+'\n  </a>\n\n  <span class="Embeddable__controls__timing">\n    <span class="Embeddable__controls__current">0:00</span>/<span class="Embeddable__controls__duration">0:00</span>\n  </span>\n\n  <div class="Embeddable__controls__secondary">\n    <a class="Embeddable__button Embeddable__controls__subtitles" href="#">\n      '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-subtitles","Subtitles","Embeddable__button__icon",s):a.call(t,"icon","control-subtitles","Subtitles","Embeddable__button__icon",s)))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__playlist" href="#">\n      '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-playlist","Show talks","Embeddable__button__icon",s):a.call(t,"icon","control-playlist","Show talks","Embeddable__button__icon",s)))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__fullscreen" href="#">\n      '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-fullscreen","Full screen","Embeddable__button__icon",s):a.call(t,"icon","control-fullscreen","Full screen","Embeddable__button__icon",s)))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__smallscreen" href="#">\n      '+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-fullscreen-exit","Exit full screen","Embeddable__button__icon",s):a.call(t,"icon","control-fullscreen-exit","Exit full screen","Embeddable__button__icon",s)))+"\n    </a>\n  </div>\n</div>\n"});return n}),define("apps/embeddable/views/controls",["./base","apps/embeddable/utils/toggle-class","apps/embeddable/utils/untoggle-class","utils/formatDuration","hbs!apps/embeddable/templates/controls"],function(e,t,n,i,s){"use strict";var r=e.extend({className:"Embeddable__controls",propsDefaults:{unskipEnabled:!1,playEnabled:!1,pauseEnabled:!1,skipEnabled:!1,volumeActive:!1,volumeEnabled:!1,volumeMuted:!1,subtitlesEnabled:!1,subtitlesActive:!1,subtitlesEffective:!1,playlistEnabled:!1,playlistActive:!1,fullscreenEnabled:!1,fullscreen:!1},propsEvents:{"change:unskipEnabled":"renderUnskip","change:playEnabled":"renderPlay","change:pauseEnabled":"renderPause","change:skipEnabled":"renderSkip","change:volumeEnabled":"renderVolume","change:volumeMuted":"renderVolume","change:volumeActive":t("a.Embeddable__controls__volume","Embeddable__button--active"),"change:subtitlesEnabled":"renderSubtitles","change:subtitlesActive":t("a.Embeddable__controls__subtitles","Embeddable__button--active"),"change:subtitlesEffective":t("a.Embeddable__controls__subtitles","Embeddable__button--effective"),"change:playlistActive":t("a.Embeddable__controls__playlist","Embeddable__button--active"),"change:playlistEnabled":"renderPlaylist","change:fullscreenEnabled":"renderFullscreen","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(s()),this.renderUnskip(),this.renderPlay(),this.renderPause(),this.renderSkip(),this.renderVolume(),this.renderSubtitles(),this.renderPlaylist(),this.renderFullscreen(),this},renderCurrent:function(e){this.find("span.Embeddable__controls__current").text(i(e))},renderDuration:function(e){this.find("span.Embeddable__controls__duration").text(i(e))},renderUnskip:n("a.Embeddable__controls__unskip","Embeddable__button--disabled"),renderPlay:n("a.Embeddable__controls__play","Embeddable__button--inapplicable"),renderPause:n("a.Embeddable__controls__pause","Embeddable__button--inapplicable"),renderSkip:n("a.Embeddable__controls__skip","Embeddable__button--disabled"),renderSubtitles:n("a.Embeddable__controls__subtitles","Embeddable__button--inapplicable"),renderPlaylist:n("a.Embeddable__controls__skip,a.Embeddable__controls__unskip,a.Embeddable__controls__playlist","Embeddable__button--inapplicable"),renderVolume:function(){var e=this.props.get("volumeEnabled"),t=this.props.get("volumeMuted");this.find("a.Embeddable__controls__volume")[e?"removeClass":"addClass"]("Embeddable__button--inapplicable")[t?"addClass":"removeClass"]("Embeddable__button--effective")},renderFullscreen:function(){var e=this.props.get("fullscreen"),t=this.props.get("fullscreenEnabled");this.$el[t&&e?"addClass":"removeClass"]("Embeddable__controls--fullscreen"),this.find("a.Embeddable__controls__fullscreen")[!t||e?"addClass":"removeClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__smallscreen")[t&&e?"removeClass":"addClass"]("Embeddable__button--inapplicable")}});return r}),define("apps/embeddable/views/play-button",["./base"],function(e){"use strict";var t=e.extend({className:"Embeddable__play-button g-button-play",propsDefaults:{enabled:!1,visible:!1},propsEvents:{"change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--visible")}}});return t}),define("utils/applyAll",["jquery"],function(e){"use strict";function t(n,i,s){var r,a;for(r=0,a=i.length;a>r;r++)e.isArray(i[r])?t(n,i[r],s):i[r].apply(n,s)}return t}),define("utils/throwError",[],function(){"use strict";return function(e){throw new Error("Error in TED: "+e)}}),define("lib/pubSub",["jquery","utils/applyAll","utils/throwError"],function(e,t,n){"use strict";function i(e){var i={publish:e.fire,subscribe:e.add,unsubscribe:e.remove},s=null;e.add(function(e){s=e}),i.read=function(){return s};var r;return i.publishUnique=function(){if(!window.JSON)return n("JSON object not available. You may need to shim it on this client."),!1;var t=Array.prototype.slice.call(arguments,0),i=JSON.stringify(t);i!==r&&(e.fire.apply(e,t),r=i)},i.once=function(){function n(){t(e,i,arguments),e.remove(n)}var i=arguments;return e.add(n)},i.future=function(){function n(){r&&t(e,s,arguments)}var i,s=arguments,r=!1;return i=e.add(n),r=!0,i},i}function s(t){var n,s=t&&r[t];return s||(n=e.Callbacks("memory"),s=i(n),t&&(r[t]=s)),s}var r={};return s._reset=function(){r={}},s}),define("lib/resize",["jquery","lodash","lib/pubSub"],function(e,t,n){"use strict";function i(e){for(var t,i=p;i--;)!t&&e>=h[i].at&&(t=h[i].its);n("sizeGroup").publishUnique(t)}function s(){var e=0,t=c;if(r=window.innerHeight,a=window.innerWidth||document.documentElement.clientWidth,u)e=l;else for(;t--;)!e&&a>=o[t]&&(e=o[t]);n("breakpoint").publishUnique(e),n("height").publishUnique(r),n("width").publishUnique(a)}var r,a,o=[320,480,600,768,1024,1200],l=1024,u=e("html").is(".oldie"),c=o.length,h=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],p=h.length;return e(window).on("resize",t.throttle(s,100)),s(),n("breakpoint").subscribe(i),n}),define("apps/embeddable/views/expandable",["lodash","./base","lib/pubSub","lib/resize"],function(e,t,n){"use strict";var i=t.extend({className:"Embeddable__expandable",propsDefaults:{open:!1},propsEvents:{"change:open":function(e,t){this[t?"open":"close"]()}},open:function(){this._setCoords()},close:function(){this.$el.css("top","-100%")},anchorTo:function(e){this.$anchor=e,this._setCoords()},_setCoords:function(){var t=this.find("div.Embeddable__expandable__content");if(t.length&&this.$anchor&&this.props.get("open")){this._settedCoordsOnce||(this._setCoordsBound=e.bind(this._setCoords,this),n("height").future(this._setCoordsBound),n("width").future(this._setCoordsBound),this._settedCoordsOnce=!0);var i={},s=this.$anchor.offset(),r=s.left,a=s.top,o=t.outerHeight(),l=a-o;0>l?(i.top=0,i.height=a+"px"):(i.top=l,i.height="auto");var u=t.outerWidth(),c=n("width").read();0>c-r-u?(i.left="initial",i.right=0):(i.left=r,i.right="initial"),this.$el.css(i)}}});return i}),define("templates/helpers/formatDuration",["Handlebars","utils/formatDuration"],function(e,t){"use strict";e.registerHelper("formatDuration",t)}),define("hbs!templates/thumb",["hbs","hbs/handlebars","templates/helpers/formatDuration"],function(e,t){var n=t.template(function(e,t,n,i,s){function r(e){var t,i,s="";return s+='\n    <span class="thumb__duration">\n      '+c((t=n.formatDuration||e&&e.formatDuration,i={hash:{}},t?t.call(e,e&&e.playDuration,i):u.call(e,"formatDuration",e&&e.playDuration,i)))+"\n    </span>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var a,o,l="",u=n.helperMissing,c=this.escapeExpression,h="function",p=this;return l+='\n\n<span class="thumb thumb--',(o=n.ratio)?a=o.call(t,{hash:{}}):(o=t&&t.ratio,a=typeof o===h?o.call(t,{hash:{}}):o),l+=c(a)+" ",(o=n.cropClass)?a=o.call(t,{hash:{}}):(o=t&&t.cropClass,a=typeof o===h?o.call(t,{hash:{}}):o),l+=c(a)+'">\n  <span class="thumb__sizer"><span class="thumb__tugger"><img src="',(o=n.src)?a=o.call(t,{hash:{}}):(o=t&&t.src,a=typeof o===h?o.call(t,{hash:{}}):o),l+=c(a)+'" class="thumb__image" alt=""><span class="thumb__aligner"></span></span></span>\n\n  ',a=n["if"].call(t,t&&t.playDuration,{hash:{},inverse:p.noop,fn:p.program(1,r,s)}),(a||0===a)&&(l+=a),l+="\n</span>\n"});return n}),define("templates/helpers/thumb",["Handlebars","hbs!templates/thumb"],function(e,t){"use strict";e.registerHelper("thumb",function(n,i,s){var r=s&&s>0?s:!1;return i=i||"video",new e.SafeString(t({cropClass:"video"===i?"thumb--crop-top":"",src:n,ratio:i,playDuration:r,playIcon:!r}))})}),define("hbs!apps/embeddable/templates/playlist",["hbs","hbs/handlebars","templates/helpers/thumb"],function(e,t){var n=t.template(function(e,t,n,i,s){function r(e){var t,i,s,r="";return r+='\n    <a class="undec Embeddable__playlist__talk" href="',(i=n.canonical)?t=i.call(e,{hash:{}}):(i=e&&e.canonical,t=typeof i===l?i.call(e,{hash:{}}):i),r+=u(t)+'" data-id="',(i=n.id)?t=i.call(e,{hash:{}}):(i=e&&e.id,t=typeof i===l?i.call(e,{hash:{}}):i),r+=u(t)+'">\n      <div class="media">\n        <div class="Embeddable__playlist__talk__image media__image media__image--thumb">\n          '+u((i=n.thumb||e&&e.thumb,s={hash:{}},i?i.call(e,e&&e.thumb,e&&e["null"],e&&e.duration,s):c.call(e,"thumb",e&&e.thumb,e&&e["null"],e&&e.duration,s)))+'\n        </div>\n\n        <div class="media__message">\n          <h4 class="Embeddable__playlist__talk__title">\n            '+u((t=e&&e.speaker,typeof t===l?t.apply(e):t))+":\n            "+u((t=e&&e.title,typeof t===l?t.apply(e):t))+"\n          </h4>\n        </div>\n      </div>\n    </a>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var a,o="",l="function",u=this.escapeExpression,c=n.helperMissing,h=this;return o+='\n\n<div class="Embeddable__expandable__content Embeddable__playlist__bar">\n  ',a=n.each.call(t,t&&t.talks,{hash:{},inverse:h.noop,fn:h.program(1,r,s)}),(a||0===a)&&(o+=a),o+="\n</div>\n"});return n}),define("apps/embeddable/views/playlist",["./expandable","hbs!apps/embeddable/templates/playlist"],function(e,t){"use strict";var n=e.extend({className:"Embeddable__expandable Embeddable__playlist",initialize:function(e){this.talks=e.talks,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(t({talks:this.talks.toJSON()})),this
}});return n}),define("hbs!apps/embeddable/templates/subtitles",["hbs","hbs/handlebars"],function(e,t){var n=t.template(function(e,t,n,i,s){function r(e){var t,i,s="";return s+='\n      <li class="Embeddable__subtitles__item">\n        <a class="checkable Embeddable__subtitles__language" href="#" data-code="',(i=n.languageCode)?t=i.call(e,{hash:{}}):(i=e&&e.languageCode,t=typeof i===l?i.call(e,{hash:{}}):i),s+=u(t)+'">\n          <span class="checkable__label">\n            ',(i=n.languageName)?t=i.call(e,{hash:{}}):(i=e&&e.languageName,t=typeof i===l?i.call(e,{hash:{}}):i),s+=u(t)+"\n          </span>\n        </a>\n      </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var a,o="",l="function",u=this.escapeExpression,c=this;return o+='\n\n<div class="Embeddable__expandable__content">\n  <ul class="sl">\n    <li class="Embeddable__subtitles__item">\n      <a class="checkable Embeddable__subtitles__language" href="#">\n        <span class="checkable__label">\n          Turn subtitles off\n        </span>\n      </a>\n    </li>\n\n    ',a=n.each.call(t,t&&t.languages,{hash:{},inverse:c.noop,fn:c.program(1,r,s)}),(a||0===a)&&(o+=a),o+="\n  </ul>\n</div>\n"});return n}),define("apps/embeddable/views/subtitles",["./expandable","hbs!apps/embeddable/templates/subtitles"],function(e,t){"use strict";var n=e.extend({className:"Embeddable__expandable Embeddable__subtitles",propsDefaults:{activeSubtitle:null,languages:[]},propsEvents:{"change:activeSubtitle":"renderActiveSubtitle","change:languages":"render"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){var e=this.props.get("languages");return e&&e.length&&(this.$el.html(t({languages:e})),this.renderActiveSubtitle()),this},renderActiveSubtitle:function(){var e=this.props.get("activeSubtitle"),t="Embeddable__subtitles__language--active checkable--checked",n=this.find("a.Embeddable__subtitles__language");n.removeClass(t),e&&n.filter("[data-code="+e+"]").addClass(t)}});return n}),define("hbs!apps/embeddable/templates/volume",["hbs","hbs/handlebars","templates/helpers/icon"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i,s,r="",a=n.helperMissing,o=this.escapeExpression;return r+='\n\n<div class="Embeddable__expandable__content Embeddable__volume__inner">\n  <div class="Embeddable__volume__meter"><div class="Embeddable__volume__meter__level"></div><div class="Embeddable__volume__slider"></div></div>\n\n  <a class="Embeddable__volume__unmute Embeddable__button Embeddable__button--effective" href="#">'+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-mute","Mute","Embeddable__button__icon",s):a.call(t,"icon","control-mute","Mute","Embeddable__button__icon",s)))+'</a>\n  <a class="Embeddable__volume__mute Embeddable__button" href="#">'+o((i=n.icon||t&&t.icon,s={hash:{}},i?i.call(t,"control-mute","Mute","Embeddable__button__icon",s):a.call(t,"icon","control-mute","Mute","Embeddable__button__icon",s)))+"</a>\n</div>\n"});return n}),define("deferLink",["jquery"],function(e){"use strict";function t(e){return function(t){return n.call(this,t,e)}}function n(t,n){function i(){var e=+s.data(o)-1;s.data(o,e),0>=e&&!s.data(u)&&(c.location.href=h)}var s="A"===this.nodeName?e(this):e(t.target).closest("a"),h=s.attr("href"),p=s.attr("target"),d=s.length&&h&&1===t.which&&!t.metaKey&&!t.shiftKey,f=n;if(e.isFunction(n)&&(f=n.call(this,t),f===!1))return!1;d&&t.isDefaultPrevented()&&!s.data(o)&&(d=!1),d&&p&&"_self"!==p&&(d=!1),d&&a&&s.is("[download]")&&(d=!1),d&&s.hasClass(r)&&(d=!1);var g=+(s.data(o)||0);d&&(s.data(o,g+1),f.when?("resolved"===f.state()&&i(),f.done(i)):e.isNumeric(f)?c.setTimeout(i,f):(d=!1,s.data(o,g))),d&&!g&&(t.preventDefault(),s.data(l,!0))}function i(i){return i.when||e.isNumeric(i)||e.isFunction(i)?t(i):void n.call(this,i,s)}var s=50,r="no-defer",a="download"in document.createElement("a"),o="defer-link-pends",l="defer-link-preventable",u="defer-link-prevented",c=window,h=e.Event.prototype.preventDefault;return e.Event.prototype.preventDefault=function(){var t=e(this.target);return t.data(l)&&t.data(u,!0),h.apply(this,Array.prototype.slice.call(arguments))},i}),define("lib/ga",["jquery","lodash","deferLink","lib/pubSub","lib/resize"],function(e,t,n,i){"use strict";function s(){var e=o.slice.call(arguments),i=this;return function(s){return i.apply(u,e),t.has(s,"originalEvent")&&t.has(this,"nodeName")&&"click"===s.type?n.call(this,s):void 0}}function r(){var e,t=0;i("breakpoint").subscribe(function(n){u("set","dimension1",n),t++&&u.sendEvent("breakpoint","change",e+"|"+n,t),e=n})}function a(t){var n=e(this),i="ga-";t=e.extend(t||{},{category:n.data(i+"category"),action:n.data(i+"action"),label:n.data(i+"label")}),u.sendEvent(t.category,t.action,t.label)}var o=[],l=window,u=l[l.GoogleAnalyticsObject]||e.noop;return t.assign(u,{send:t.partial(u,"send"),set:t.partial(u,"set"),sendEvent:t.partial(u,"send","event"),sendSocial:t.partial(u,"send","social")},function(e,t){return t.recall=s,t}),r(),u.send("pageview"),e(function(){e(document).on("click","a.ga-link",n(function(){return a.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),u}),define("jqueryui/mouse",["jquery"],function(e){return function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e),e}),define("touchPunch",["jquery","jqueryui/mouse"],function(e){return function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,i=e.ui.mouse.prototype,s=i._mouseInit;i._touchStart=function(e){var i=this;!n&&i._mouseCapture(e.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},i._touchMove=function(e){n&&(this._touchMoved=!0,t(e,"mousemove"))},i._touchEnd=function(e){n&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),n=!1)},i._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),s.call(t)}}}(e),e}),define("widgets/slider",["jquery","jqueryui/widget","jqueryui/mouse","touchPunch"],function(e){"use strict";return e.widget("ted.slider",e.ui.mouse,{options:{distance:0,orientation:"horizontal",value:0,change:null,slide:null,start:null,stop:null},value:function(e){return arguments.length&&(this.options.value=e,this._refreshValue()),this.options.value},_change:function(e){this._trigger("change",e,this._getData({value:this.value()}))},_create:function(){this._detectOrientation(),this._mouseInit(),this.progressElement=e("<div class=slider__progress></div>"),this.cursorElement=e("<div class=slider__cursor></div>").appendTo(this.progressElement),this.element.addClass("slider slider--"+this.orientation).append(this.progressElement)},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_getData:function(e){return e},_mouseCapture:function(e){var t,n;return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},n=this._valueFromPosition(t),this._start(e),this._slide(e,n),!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._valueFromPosition(t);return this._slide(e,n),!1},_mouseStart:function(){return!0},_mouseStop:function(e){return this._mouseDrag(e),this._stop(e),this._change(e),!1},_refreshValue:function(){var e=this.value();this.progressElement.css("vertical"===this.orientation?"height":"width",100*e+"%")},_slide:function(e,t){this._trigger("slide",e,this._getData({value:t})),this.value(t)},_start:function(e){this.element.addClass("slider--active"),this._trigger("start",e)},_stop:function(e){this.element.removeClass("slider--active"),this._trigger("stop",e)},_valueFromPosition:function(e){var t,n,i;return"vertical"===this.orientation?(i=this.elementSize.height,n=e.y-this.elementOffset.top):(i=this.elementSize.width,n=e.x-this.elementOffset.left),t=n/i,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),t}}),function(t,n){return e(t).slider(n)}}),define("widgets/scrubber",["jquery","lib/ga","widgets/slider"],function(e,t){"use strict";var n="scrubber",i=n+"--active",s=n+"--hover",r=n+"__cursor",a=n+"__playhead",o=n+"__progress";return e.widget("ted.scrubber",e.ted.slider,{options:{duration:null,player:null},_isScrubbing:!1,_isSeeking:!1,_progress:0,_create:function(){this.options.player&&this._setPlayer(),this.playheadElement=e("<div class="+a+"></div>").prependTo(this.element),this._super(),this.element.addClass(n),this.cursorElement.addClass(r),this.progressElement.addClass(o),this._on(this._handleEvents)},_getData:function(t){return e.extend({cursor:t.value*this.options.duration,playhead:this._progress*this.options.duration,progress:this._progress,duration:this.options.duration},t)},_handleEvents:{mouseover:function(){this.element.addClass(s)},mouseout:function(){this.element.removeClass(s)},scrubberstart:function(){this.element.addClass(i),this._isScrubbing=!0},scrubberstop:function(){this.element.removeClass(i),this._isScrubbing=!1}},_setOption:function(e,t){this._super(e,t),"duration"===e&&this.progress(this._getData({value:this._progress}).playhead/t)},_setPlayer:function(){var n=this,i=e(this.options.player),s=i.player("talk");this.option("duration",s.duration),this._on({scrubberchange:function(e,n){i.player("seek",n.cursor),t.sendEvent("player","seek","scrubber",Math.round(n.cursor))}}),i.on("playertalk",function(e,t){n.option("duration",t.duration),n.progress(0)}).on("playerduration",function(e,t){n.option("duration",t.duration)}).on("playerseeking",function(){n._isSeeking=!0}).on("playerseeked",function(){n._isSeeking=!1}).on("playerprogress",function(e,t){n.progress(t.progress)})},isSeeking:function(e){return arguments.length&&(this._isSeeking=!!e),this._isScrubbing||this._isSeeking},progress:function(e){if(arguments.length){var t=100*e+"%";this.progressElement&&!this.isSeeking()&&this.progressElement.width(t),this.playheadElement&&this.playheadElement.width(t),this._progress=e,this._trigger("progress",null,this._getData({value:e}))}return this._progress}}),function(t,n){return e(t).scrubber(n)}}),define("apps/embeddable/views/volume",["./expandable","hbs!apps/embeddable/templates/volume","widgets/scrubber"],function(e,t){"use strict";var n=e.extend({className:"Embeddable__expandable Embeddable__volume",propsDefaults:{level:.5,muted:!1},propsEvents:{"change:level":"renderLevel","change:muted":"renderMuted"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){return this.$el.html(t()),this.renderLevel(),this.find("div.Embeddable__volume__slider").scrubber({orientation:"vertical"}),this},renderLevel:function(){this.find("div.Embeddable__volume__meter__level").height(100*this.props.get("level")+"%")},renderMuted:function(){this.$el[this.props.get("muted")?"addClass":"removeClass"]("Embeddable__volume--muted")}});return n}),define("hbs!apps/embeddable/templates/scrubber",["hbs","hbs/handlebars"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i="";return i+='\n\n<div class="Embeddable__scrubber__bar">\n  <div class="Embeddable__scrubber__meter"><div class="Embeddable__scrubber__meter__progress"></div></div>\n\n  <div class="Embeddable__scrubber__slider"></div>\n</div>\n'});return n}),define("apps/embeddable/views/scrubber",["./base","hbs!apps/embeddable/templates/scrubber","widgets/scrubber"],function(e,t){"use strict";var n=e.extend({className:"Embeddable__scrubber",events:{scrubberchange:function(){this.find("div.Embeddable__scrubber__slider").scrubber("progress",0)}},propsDefaults:{currentTime:0,duration:0,fullscreen:!1},propsEvents:{"change:currentTime":"renderTime","change:duration":"renderTime","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(t()),this.renderFullscreen(),this.find("div.Embeddable__scrubber__slider").scrubber(),this},renderFullscreen:function(){this.$el[this.props.get("fullscreen")?"addClass":"removeClass"]("Embeddable__scrubber--fullscreen")},renderTime:function(){this.find("div.Embeddable__scrubber__meter__progress").width(this.props.get("currentTime")/this.props.get("duration")*100+"%")}});return n}),define("apps/embeddable/views/chrome",["./base","./controls","./play-button","./playlist","./subtitles","./volume","./scrubber"],function(e,t,n,i,s,r,a){"use strict";var o=e.extend({className:"Embeddable__chrome",events:{"click a":function(e){e.preventDefault()},"click a.Embeddable__controls__pause":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click a.Embeddable__controls__play":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__controls__skip":function(){var e=this.props.get("next");e&&(this.state.set("skipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__unskip":function(){var e=this.props.get("prev");e&&(this.state.set("unskipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__volume":function(){this.state.set("volumeOpen",!this.state.get("volumeOpen"))},"click a.Embeddable__controls__subtitles":function(){this.state.set("subtitlesOpen",!this.state.get("subtitlesOpen"))},"click a.Embeddable__controls__playlist":function(){this.state.set("playlistOpen",!this.state.get("playlistOpen"))},"click a.Embeddable__controls__fullscreen":function(){this.props.get("fullscreen")||this.state.set("fullscreenPending",!0)},"click a.Embeddable__controls__smallscreen":function(){this.props.get("fullscreen")&&this.state.set("smallscreenPending",!0)},"click div.Embeddable__play-button":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__playlist__talk":function(e){var t=+$(e.target).closest("a.Embeddable__playlist__talk").data("id");this.state.set("pendingTalk",this.talks.get(t))},"click a.Embeddable__subtitles__language":function(e){var t=$(e.target).closest("a.Embeddable__subtitles__language").data("code");t?this.props.get("subtitle")===t?this.state.set("pendingSubtitle",!1):this.state.set("pendingSubtitle",t):this.props.get("subtitle")&&this.state.set("pendingSubtitle",!1)},"click a.Embeddable__volume__mute":function(){this.props.get("muted")||this.state.set("mutePending",!0)},"click a.Embeddable__volume__unmute":function(){this.props.get("muted")&&this.state.set("unmutePending",!0)},"scrubberslide div.Embeddable__volume__slider":function(e,t){this.state.set("pendingVolume",t.value)},"scrubberchange div.Embeddable__scrubber__slider":function(e,t){var n=this.props.get("duration");n&&this.state.set("pendingSeek",t.value*n)}},stateDefaults:{pausePending:!1,playPending:!1,pendingTalk:null,skipPending:!1,unskipPending:!1,volumeOpen:!1,pendingVolume:null,mutePending:!1,unmutePending:!1,subtitlesAvailable:!1,subtitlesOpen:!1,pendingSubtitle:null,playlistOpen:!1,fullscreenPending:!1,smallscreenPending:!1,pendingSeek:null},stateEvents:{"on:playPending":function(){this.playButton.props.set("visible",!1)},"change:pendingTalk":function(e,t){null!==t&&this.state.set("playlistOpen",!1)},"change:volumeOpen":function(e,t){this.volume.props.set("open",t),this.controls.props.set("volumeActive",t),t&&(this.state.set("subtitlesOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingVolume":function(e,t){this.volume.props.set("level",t)},"change:subtitlesAvailable":"_checkSubtitles","change:subtitlesOpen":function(e,t){this.subtitles.props.set("open",t),this.controls.props.set("subtitlesActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingSubtitle":function(e,t){null!==t&&this.state.set("subtitlesOpen",!1)},"change:playlistOpen":function(e,t){this.playlist.props.set("open",t),this.controls.props.set("playlistActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("subtitlesOpen",!1))}},propsDefaults:{enabled:!0,activated:!1,hovering:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,next:null,prev:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1},propsEvents:{"change:enabled":"_setActivation","change:activated":"_setActivation","change:hovering":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__chrome--hovering")},"change:playing":function(e,t){this.controls.props.set("playEnabled",!t),this.controls.props.set("pauseEnabled",!!t)},"on:playing":function(){this.state.set("playPending",!1),this.playButton.props.set("visible",!1)},"on:paused":function(){this.state.set("pausePending",!1),this.playButton.props.set("enabled",!0),this.playButton.props.set("visible",!0)},"change:duration":function(e,t){this.controls.renderDuration(t),this.scrubber.props.set("duration",t)},"change:currentTime":function(e,t){this.controls.renderCurrent(t),this.scrubber.props.set("currentTime",t)},"change:talk":function(e,t){this.state.set("pendingTalk",null),this.state.set("skipPending",!1),this.state.set("unskipPending",!1);var n=t.get("languages");this.subtitles.props.set("languages",n),this.state.set("subtitlesAvailable",n.length>0)},"change:next":function(e,t){this.controls.props.set("skipEnabled",!!t)},"change:prev":function(e,t){this.controls.props.set("unskipEnabled",!!t)},"change:volume":function(e,t){this.volume.props.set("level",t)},"change:canVolume":function(e,t){this.controls.props.set("volumeEnabled",t)},"change:muted":function(e,t){this.state.set("mutePending",!1),this.state.set("unmutePending",!1),this.volume.props.set("muted",t),this.controls.props.set("volumeMuted",t)},"change:subtitle":function(e,t){this.subtitles.props.set("activeSubtitle",t?t:null),this.controls.props.set("subtitlesEffective",!!t),this.state.set("pendingSubtitle",null)},"change:canSubtitle":"_checkSubtitles","change:fullscreen":function(e,t){this.state.set("fullscreenPending",!1),this.state.set("smallscreenPending",!1),this.controls.props.set("fullscreen",t),this.scrubber.props.set("fullscreen",t)},"change:canFullscreen":function(e,t){this.controls.props.set("fullscreenEnabled",t)}},initialize:function(e){this.talks=e.talks,this.scrubber=new a,this.controls=new t,this.playButton=new n,this.playlist=new i({talks:this.talks}),this.subtitles=new s,this.volume=new r,this.initializeState(),this.initializeProps(),this.listenTo(this.talks,"add",this._setTalks),this.listenTo(this.talks,"all",this._setTalks),this.listenTo(this.talks,"reset",this._setTalks)},render:function(){this.$el.append(this.playButton.$el),this.playButton.render(),this.$el.append(this.controls.$el),this.controls.render(),this.$el.append(this.scrubber.$el),this.scrubber.render(),this.$el.append(this.volume.$el),this.volume.render(),this.$el.append(this.playlist.$el),this.playlist.render(),this.$el.append(this.subtitles.$el),this.subtitles.render(),this.volume.anchorTo(this.controls.find("a.Embeddable__controls__volume")),this.subtitles.anchorTo(this.controls.find("a.Embeddable__controls__subtitles")),this.playlist.anchorTo(this.controls.find("a.Embeddable__controls__playlist"))},_checkSubtitles:function(){this.controls.props.set("subtitlesEnabled",this.state.get("subtitlesAvailable")&&this.props.get("canSubtitle"))},_setActivation:function(){var e=this.props.get("enabled")&&this.props.get("activated");this.$el[e?"addClass":"removeClass"]("Embeddable__chrome--activated")},_setTalks:function(){var e=this.talks.length>1;this.controls.props.set("playlistEnabled",e)}});return o}),define("utils/is_mobile",[],function(){"use strict";function e(e){return!!t.ua.match(e)}function t(){return t.isIOS()||t.isAndroid()}var n=/Android/g,i=/(iPad|iPhone|iPod)/g;return t.isIOS=function(){return e(i)},t.isAndroid=function(){return e(n)},t.ua=window.navigator&&window.navigator.userAgent||"",t}),define("hbs!apps/embeddable/templates/player",["hbs","hbs/handlebars"],function(e,t){var n=t.template(function(e,t,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers);var i="";return i+='\n\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="Embeddable__player__object"></div>\n  </div>\n</div>\n'});return n}),define("Modernizr",[],function(){"use strict";return window.Modernizr}),define("widgets/player/ga-tracker",["lodash","Modernizr","lib/ga"],function(e,t,n){"use strict";function i(e){this._data={currentPlayerTime:null,hasPlayed:!1,lastPlayedTalkId:null,lastChangedTalkId:null,marks:null,markableProgress:[25,50,75,95],markableTimes:[],postRolling:!1},this._widget=e,this._resetMarks(),this._addHandlers()}return i.prototype._resetMarkableTimes=function(t){this._data.markableTimes=e.union([10,30,60,90],e.range(120,t+1,120))},i.prototype._resetMarks=function(){this._data.marks={times:{},progress:{},ads:{}}},i.prototype._incrementTalkViews=function(){var e=require("Cookies").get("__utma");if(e&&t.localstorage){var i=+e.split(".").pop(),s=window.localStorage,r="talkViews",a=(s.getItem(r)||"").split("|");2===a.length&&+a[0]===i?a[1]=+a[1]+1:a=[i,1],s.setItem(r,a.join("|")),n.set("metric1",a[1])}},i.prototype._onTalkChange=function(){this._data.postRolling=!1,this._resetMarks(),this._incrementTalkViews()},i.prototype._addHandlers=function(){var e=this,t={playererror:function(e,t){var i=t.error,s="abortive"===i.severity;(s||"fatal"===i.severity)&&n.sendEvent("player",s?"error.abort":"error.fatal",i.message)},playerenterfullscreen:function(){n.sendEvent("player","enterFullScreen")},playerexitfullscreen:function(){n.sendEvent("player","exitFullScreen")},playerplay:function(){var t=e._widget.options.currentTalk.id;n.sendEvent("player","start",e._data.hasPlayed?"subsequent":"initial"),e._data.hasPlayed=!0,e._data.lastPlayedTalkId!==t&&(n.sendEvent("player.talk","start",t),e._data.lastPlayedTalkId=t)},playerpause:function(){n.sendEvent("player","pause",Math.round(e._data.currentPlayerTime))},playerready:function(){var t=e._widget.mode();n.sendEvent("player","initialize",t,{nonInteraction:1})},playerrequestnext:function(){n.sendEvent("player","next",e._data.postRolling?"postroll":"talk")},playerrequestplay:function(){n.sendEvent("player","request",e._data.hasPlayed?"subsequent":"initial")},playerprogress:function(t,i){var s=100*i.progress,r=0,a=-1,o=e._data.markableProgress.length;if(!e._widget.player.postrolling)for(;e._data.marks&&++a<o&&s>r;)r=e._data.markableProgress[a],s>=r&&!e._data.marks.progress[r]&&(e._data.currentPlayerTime>e._widget.options.startTrackingAt&&n.sendEvent("player","progressPct",r+"%"),e._data.marks.progress[r]=!0)},playertalkcomplete:function(){e._data.marks&&!e._data.marks.progress[100]&&(n.sendEvent("player","progressPct","100%"),e._data.marks.progress[100]=!0,n.sendEvent("player.talk","complete",e._widget.options.currentTalk.id))},playercurrenttime:function(t,i){var s=i.currentTime,r=0,a=-1,o=e._data.markableTimes.length;if(e._data.currentPlayerTime=s,!e._widget.player.postrolling)for(;e._data.marks&&++a<o&&s>r;)r=e._data.markableTimes[a],s>=r&&!e._data.marks.times[r]&&(r>e._widget.options.startTrackingAt&&n.sendEvent("player","progressTime",r+" seconds"),e._data.marks.times[r]=!0)},playerprerollstart:function(){e._data.marks&&!e._data.marks.ads.prerollStart&&(n.sendEvent("player.preRoll","cardStart"),e._data.marks.ads.prerollStart=!0)},playerprerollblock:function(){e._data.marks&&!e._data.marks.ads.prerollBlock&&(n.sendEvent("player.preRoll","cardBlock"),e._data.marks.ads.prerollBlock=!0)},playerpostrollstart:function(){e._data.postRolling=!0,e._data.marks&&!e._data.marks.ads.postrollStart&&(n.sendEvent("player.postRoll","adStart"),e._data.marks.ads.postrollStart=!0)},playerpostrollcomplete:function(){e._data.postRolling=!1,e._data.marks&&!e._data.marks.ads.postrollComplete&&(n.sendEvent("player.postRoll","adComplete"),e._data.marks.ads.postrollStart=!0)},playeradblock:function(){n.sendEvent("player","adBlock")},playerduration:function(t,n){e._widget.player.postrolling||e._resetMarkableTimes(n.duration)},playersubtitle:function(e,t){n.sendEvent("player.subtitle","setLanguage",t.subtitle.languageCode)},playertalk:function(t,n){var i=n.id;e._data.lastChangedTalkId!==i&&(e._onTalkChange(),e._data.lastChangedTalkId=i)}};this._handlers=t,this._widget._on(t)},i}),function(e){"use strict";var t=function(e,n,i){return 1===arguments.length?t.get(e):t.set(e,n,i)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(n,i,s){return s=t._getExtendedOptions(s),s.expires=t._getExpiresDate(i===e?-1:s.expires),t._document.cookie=t._generateCookieString(n,i,s),t},t.expire=function(n,i){return t.set(n,e,i)},t._getExtendedOptions=function(n){return{path:n&&n.path||t.defaults.path,domain:n&&n.domain||t.defaults.domain,expires:n&&n.expires||t.defaults.expires,secure:n&&n.secure!==e?n.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){switch(n=n||new Date,typeof e){case"number":e=new Date(n.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=encodeURIComponent(e),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=e+"="+t;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toGMTString():"",i+=n.secure?";secure":""},t._getCookieObjectFromString=function(n){for(var i={},s=n?n.split("; "):[],r=0;r<s.length;r++){var a=t._getKeyValuePairFromCookieString(s[r]);i[a.key]===e&&(i[a.key]=a.value)}return i},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=0>t?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){return t._navigator.cookieEnabled||"1"===t.set("cookies.js",1).get("cookies.js")},t.enabled=t._areEnabled(),"function"==typeof define&&define.amd?define("Cookies",[],function(){return t}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Cookies=t):window.Cookies=t}(),define("lib/currentUserId",["Cookies"],function(e){"use strict";var t="_ted_user_id";return{get:function(){return e.get(t)}}}),define("utils/ted",[],function(){"use strict";var e=function(){var e=window.navigator,t=e?e.userAgent.toLowerCase():"";if(-1!==t.indexOf("chrome"))return!1;var n=t.match(/macintosh.*os x.*applewebkit.*version\/([\d]+).*safari/);return n?+n[1]<7?!1:!0:!1};return function(t){return window.TED?"playerPath"==t?e()?window.TED.playerPathLocal:window.TED.playerPathRemote:window.TED[t]:""}}),define("widgets/player/ted-tracker",["jquery","lodash","lib/currentUserId","utils/ted"],function(e,t,n,i){"use strict";function s(e){var t=i("zone")||{};this._data={lastMetaTalkId:null,lastPlayTalkId:null,vmAPIKey:t.api_key||"unknown"},this._widget=e,this._addHandlers()}return s.prototype._sendVM=function(n){var i=t.extend({},n,{share_token:this._widget.options.shareToken});e.post("/talks/"+this._widget.talk().id+"/views",{view:i})},s.prototype._recordViewID=function(){this._widget.options.recordInIdentity&&n.get()&&e.post("/talks/"+this._widget.talk().id+"/user_views")},s.prototype._recordViewVM=function(){var e=this._widget.mode();if("hls"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hls"}),"flash"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_flash_hls"}),"h264"===e){var t=this._widget.options.currentTalk.resources.h264[0].bitrate;this._sendVM({apikey:this._data.vmAPIKey,format:"mp4",quality:t?t+"k":"variant",service:"ted_player_html5_mp4"})}},s.prototype._onTalkPlay=function(){this._recordViewID(),this._recordViewVM()},s.prototype._addHandlers=function(){var e=this,t={playerrequestplay:function(){e._widget._ytPlayer&&e._widget._ytPlayer.playVideo&&e._sendVM({apikey:"botw",service:"botw"})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(),e._data.lastPlayTalkId=t)}};this._handlers=t,this._widget._on(t)},s});var ns_=window.ns_=window.ns_||{};ns_.StreamSense=ns_.StreamSense||function(){function e(e,t){var i=e||"",s="undefined",r=c.comScore||c.sitestat||function(e){var t,i,r,a,o,u="comScore=",p=h.cookie,d="",f="indexOf",g="substring",_="length",v=n.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT,b="&ns_",y="&",k=c.encodeURIComponent||escape;if(p[f](u)+1)for(a=0,r=p.split(";"),o=r[_];o>a;a++)i=r[a][f](u),i+1&&(d=y+unescape(r[a][g](i+u[_])));e+=b+"_t="+ +new Date+b+"c="+(h.characterSet||h.defaultCharset||"")+d,e.length>v&&e.indexOf(y)>0&&(t=e.substr(0,v-8).lastIndexOf(y),e=(e.substring(0,t)+b+"cut="+k(e.substring(t+1))).substr(0,v)),l.httpGet(e),typeof ns_p===s&&(ns_p={src:e}),ns_p.lastMeasurement=e
};if(typeof t!==s){var a=[],o=c.encodeURIComponent||escape;for(var u in t)t.hasOwnProperty(u)&&a.push(o(u)+"="+o(t[u]));/[\?\&]$/.test(i)||(i+="&"),i+=a.join("&")}return r(i)}function t(e,t){for(var i,s=c.encodeURIComponent||escape,r=[],a=m.LABELS_ORDER,o=e.split("?"),l=o[0],u=o[1],p=u.split("&"),d=0,f=p.length;f>d;d++){var g=p[d].split("="),_=unescape(g[0]),v=unescape(g[1]);_&&(t[_]=v)}for(var b={},d=0,f=a.length;f>d;d++){var y=a[d];if(t.hasOwnProperty(y)){var k=t[y];"undefined"!=typeof k&&null!=k&&(b[y]=!0,r.push(s(y)+"="+s(t[y])))}}for(var y in t)if(!b[y]&&t.hasOwnProperty(y)){var k=t[y];"undefined"!=typeof k&&null!=k&&r.push(s(y)+"="+s(t[y]))}i=l+"?"+r.join("&"),i=i+(i.indexOf("&c8=")<0?"&c8="+s(h.title):"")+(i.indexOf("&c7=")<0?"&c7="+s(h.URL):"")+(i.indexOf("&c9=")<0?"&c9="+s(h.referrer):"");var E=n.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT;if(i.length>E&&i.indexOf("&")>0){var w=i.substr(0,E-8).lastIndexOf("&");i=(i.substring(0,w)+"&ns_cut="+s(i.substring(w+1))).substr(0,E)}return i}var n=function(){var e={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;n>i;i++)if(t=arguments[i])for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return"undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.length&&e.length>0},indexOf:function(t,n){var i=-1;return e.forEach(n,function(e,n){e==t&&(i=n)}),i},forEach:function(e,t,n){try{if("function"==typeof t)if(n="undefined"!=typeof n?n:null,"number"!=typeof e.length||"undefined"==typeof e[0]){var i="undefined"!=typeof e.__proto__;for(var s in e)(!i||i&&"undefined"==typeof e.__proto__[s])&&"function"!=typeof e[s]&&t.call(n,e[s],s)}else for(var s=0,r=e.length;r>s;s++)t.call(n,e[s],s)}catch(a){}},regionMatches:function(e,t,n,i,s){if(0>t||0>i||t+s>e.length||i+s>n.length)return!1;for(;--s>=0;){var r=e.charAt(t++),a=n.charAt(i++);if(r!=a)return!1}return!0},size:function(e){var t,n=0;for(var t in e)e.hasOwnProperty(t)&&n++;return n},log:function(e,t){if("undefined"!=typeof t&&t){var n=new Date,i=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(i,e)}},isTrue:function(e){return"undefined"==typeof e?!1:"string"==typeof e?(e=e.toLowerCase(),"true"===e||"1"===e||"on"===e):e?!0:!1},toString:function(t){if("undefined"==typeof t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(e.size(t)>0){var n="";for(var i in t)t.hasOwnProperty(i)&&(n+=i+":"+t[i]+";");return n}return t.toString()},exists:function(e){return"undefined"!=typeof e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},safeGet:function(t,n){return n=e.exists(n)?n:"",e.exists(t)?t:n},getBrowserName:function(){var e,t,n=navigator.userAgent,i=navigator.appName;return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?i="Opera":-1!=(t=n.indexOf("Android"))?i="Android":-1!=(t=n.indexOf("Chrome"))?i="Chrome":-1!=(t=n.indexOf("Safari"))?i="Safari":-1!=(t=n.indexOf("Firefox"))?i="Firefox":-1!=(t=n.indexOf("IEMobile"))?i="Internet Explorer Mobile":"Microsoft Internet Explorer"==i||"Netscape"==i?i="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),i},getBrowserFullVersion:function(){var e,t,n,i,s,r=navigator.userAgent,a=navigator.appName,o=""+parseFloat(navigator.appVersion);return-1!=(n=r.indexOf("Opera"))?(o=r.substring(n+6),-1!=(n=r.indexOf("Version"))&&(o=r.substring(n+8))):-1!=(n=r.indexOf("OPR/"))?o=r.substring(n+4):-1!=(n=r.indexOf("Android"))?o=r.substring(n+11):-1!=(n=r.indexOf("Chrome"))?o=r.substring(n+7):-1!=(n=r.indexOf("Safari"))?(o=r.substring(n+7),-1!=(n=r.indexOf("Version"))&&(o=r.substring(n+8))):-1!=(n=r.indexOf("Firefox"))?o=r.substring(n+8):"Microsoft Internet Explorer"==a?(s=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=s.exec(r)&&(o=parseFloat(RegExp.$1))):"Netscape"==a?(s=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=s.exec(r)&&(o=parseFloat(RegExp.$1))):(t=r.lastIndexOf(" ")+1)<(n=r.lastIndexOf("/"))&&(o=r.substring(n+1)),o=o.toString(),-1!=(i=o.indexOf(";"))&&(o=o.substring(0,i)),-1!=(i=o.indexOf(" "))&&(o=o.substring(0,i)),-1!=(i=o.indexOf(")"))&&(o=o.substring(0,i)),e=parseInt(""+o,10),isNaN(e)&&(o=""+parseFloat(navigator.appVersion)),o},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return e}(),i=function(){var e="cs_",t=function(){var t="undefined"!=typeof localStorage?localStorage:{};n.extend(this,{get:function(n){return t[e+n]},set:function(n,i){t[e+n]=i},has:function(n){return e+n in t},remove:function(n){delete t[e+n]},clear:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}})};return t}(),s=function(e,t){var n=new Image;n.onload=function(){t&&t(200)},n.onerror=function(){t&&t()},n.src=e},r=function(e,t,n){n&&setTimeout(n,0)},a=function(){return{dir:function(){return null},append:function(){},write:function(){},deleteFile:function(){return!1},read:function(){return null}}}(),o=function(e,t){"undefined"!=typeof engine&&t&&setTimeout(t,0);var n=engine.createHttpClient(),i=n.createRequest("GET",e,null);i.start(),t&&setTimeout(t,0)},l=function(){var e={PLATFORM:"generic",httpGet:s,httpPost:r,Storage:i,IO:a,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}};return e}(),u=function(){function e(){return"undefined"!=typeof engine&&"undefined"!=typeof engine.stats}function t(){return n.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:n.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function s(){if(null==l){var e=t();null!=e?(l=e,u="31",c=e):(l=+new Date+~~(1e3*Math.random()),u="72",c=null)}}var l=null,u=null,c=null;return{PLATFORM:"trilithium",httpGet:o,httpPost:r,Storage:i,IO:a,getCrossPublisherId:function(){return s(),c},getAppName:function(){return n.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(){return n.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return s(),l},getVisitorIdSuffix:function(){return u},getDeviceName:function(){return n.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return n.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&"undefined"!=typeof screen.height&&"undefined"!=typeof screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:e}}();l.autoSelect=function(){u.isCompatible()&&n.extend(l,u)};var c,h,p="undefined"!=typeof window&&"undefined"!=typeof document;p?(c=window,h=document):(c={},h={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var n=n||{};n.filterMap=function(e,t){for(var i in e)-1==n.indexOf(i,t)&&delete e[i]},n.getKeys=function(e,t){var n,i=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(i[i.length]=n);return i};var d=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),f=function(){var e=[d.END,d.PLAY,d.PAUSE,d.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),g={ADPLAY:d.AD_PLAY,ADPAUSE:d.AD_PAUSE,ADEND:d.AD_END,ADCLICK:d.AD_CLICK},m={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},_=function(){var e=function(){function e(e,t){var n=t[e];null!=n&&(i[e]=n)}var t,i,s=this,r=0,a=0,o=0,l=0,u=0,c=0;n.extend(this,{reset:function(e){null!=e&&e.length>0?n.filterMap(i,e):i={},i.hasOwnProperty("ns_st_cl")||(i.ns_st_cl="0"),i.hasOwnProperty("ns_st_pn")||(i.ns_st_pn="1"),i.hasOwnProperty("ns_st_tp")||(i.ns_st_tp="1"),s.setPauses(0),s.setStarts(0),s.setBufferingTime(0),s.setBufferingTimestamp(-1),s.setPlaybackTime(0),s.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&n.extend(i,e),s.setRegisters(i,t)},getLabels:function(){return i},setLabel:function(e,t){var n={};n[e]=t,s.setLabels(n,null)},getLabel:function(e){return i[e]},getClipId:function(){return("undefined"==typeof t||null==t)&&s.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,n){var i=t.ns_st_cn;null!=i&&(s.setClipId(i),delete t.ns_st_cn),i=t.ns_st_bt,null!=i&&(o=Number(i),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),(n==f.PLAYING||null==n)&&(i=t.ns_st_sq,null!=i&&(a=Number(i),delete t.ns_st_sq)),n!=f.BUFFERING&&(i=t.ns_st_pt,null!=i&&(u=Number(i),delete t.ns_st_pt)),(n==f.PAUSED||n==f.IDLE||null==n)&&(i=t.ns_st_pc,null!=i&&(r=Number(i),delete t.ns_st_pc))},createLabels:function(e,t){var i=t||{};return i.ns_st_cn=s.getClipId(),i.ns_st_bt=String(s.getBufferingTime()),(e==d.PLAY||null==e)&&(i.ns_st_sq=String(a)),(e==d.PAUSE||e==d.END||e==d.KEEP_ALIVE||e==d.HEART_BEAT||null==e)&&(i.ns_st_pt=String(s.getPlaybackTime()),i.ns_st_pc=String(r)),n.extend(i,s.getLabels()),i},incrementPauses:function(){r++},incrementStarts:function(){a++},getBufferingTime:function(){var e=o;return l>=0&&(e+=+new Date-l),e},setBufferingTime:function(e){o=e},getPlaybackTime:function(){var e=u;return c>=0&&(e+=+new Date-c),e},setPlaybackTime:function(e){u=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return l},setBufferingTimestamp:function(e){l=e},getPauses:function(){return r},setPauses:function(e){r=e},getStarts:function(){return a},setStarts:function(e){a=e}}),i={},s.reset()};return e}(),v=function(){var e=function(){var e,t,i=this,s=null,r=0,a=0,o=0,l=0,u=0,c=0,h=!1;n.extend(this,{reset:function(e){null!=e&&e.length>0?n.filterMap(t,e):t={},i.setPlaylistId(+new Date+"_"+c),i.setBufferingTime(0),i.setPlaybackTime(0),i.setPauses(0),i.setStarts(0),i.setRebufferCount(0),h=!1},setLabels:function(e,s){null!=e&&n.extend(t,e),i.setRegisters(t,s)},getLabels:function(){return t},setLabel:function(e,t){var n={};n[e]=t,i.setLabels(n,null)},getLabel:function(e){return t[e]},getClip:function(){return s},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,n){var i=t.ns_st_sp;null!=i&&(r=Number(i),delete t.ns_st_sp),i=t.ns_st_bc,null!=i&&(o=Number(i),delete t.ns_st_bc),i=t.ns_st_bp,null!=i&&(l=Number(i),delete t.ns_st_bp),i=t.ns_st_id,null!=i&&(e=i,delete t.ns_st_id),n!=f.BUFFERING&&(i=t.ns_st_pa,null!=i&&(u=Number(i),delete t.ns_st_pa)),(n==f.PAUSED||n==f.IDLE||null==n)&&(i=t.ns_st_pp,null!=i&&(a=Number(i),delete t.ns_st_pp))},createLabels:function(t,s){var l=s||{};return l.ns_st_bp=String(i.getBufferingTime()),l.ns_st_sp=String(r),l.ns_st_id=String(e),o>0&&(l.ns_st_bc=String(o)),(t==d.PAUSE||t==d.END||t==d.KEEP_ALIVE||t==d.HEART_BEAT||null==t)&&(l.ns_st_pa=String(i.getPlaybackTime()),l.ns_st_pp=String(a)),(t==d.PLAY||null==t)&&(i.didFirstPlayOccurred()||(l.ns_st_pb="1",i.setFirstPlayOccurred(!0))),n.extend(l,i.getLabels()),l},incrementStarts:function(){r++},incrementPauses:function(){a++,s.incrementPauses()},setPlaylistCounter:function(e){c=e},incrementPlaylistCounter:function(){c++},addPlaybackTime:function(e){if(s.getPlaybackTimestamp()>=0){var t=e-s.getPlaybackTimestamp();s.setPlaybackTimestamp(-1),s.setPlaybackTime(s.getPlaybackTime()+t),i.setPlaybackTime(i.getPlaybackTime()+t)}},addBufferingTime:function(e){if(s.getBufferingTimestamp()>=0){var t=e-s.getBufferingTimestamp();s.setBufferingTimestamp(-1),s.setBufferingTime(s.getBufferingTime()+t),i.setBufferingTime(i.getBufferingTime()+t)}},getBufferingTime:function(){var e=l;return s.getBufferingTimestamp()>=0&&(e+=+new Date-s.getBufferingTimestamp()),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=u;return s.getPlaybackTimestamp()>=0&&(e+=+new Date-s.getPlaybackTimestamp()),e},setPlaybackTime:function(e){u=e},getStarts:function(){return r},setStarts:function(e){r=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return o},incrementRebufferCount:function(){o++},setRebufferCount:function(e){o=e},didFirstPlayOccurred:function(){return h},setFirstPlayOccurred:function(e){h=e}}),s=new _,t={},i.reset()};return e}(),b=function(){var i=function(i,s){function r(e){var t=0;if(null!=pt)for(var n=0;n<pt.length;n++){var i=pt[n],s=i.playingtime;if(!s||s>e){t=i.interval;break}}return t}function a(){h();var e=r(ut.getClip().getPlaybackTime());if(e>0){var t=gt>0?gt:e;X=setTimeout(c,t)}gt=0}function o(){h();var e=r(ut.getClip().getPlaybackTime());gt=e-ut.getClip().getPlaybackTime()%e,null!=X&&h()}function u(){gt=0,_t=0,mt=0}function c(){mt++;var e=$(d.HEART_BEAT,null);P(e),gt=0,a()}function h(){null!=X&&(clearTimeout(X),X=null)}function p(){_(),W=setTimeout(g,dt)}function g(){var e=$(d.KEEP_ALIVE,null);P(e),lt++,p()}function _(){null!=W&&(clearTimeout(W),W=null)}function b(){k(),it.isPauseOnBufferingEnabled()&&O(f.PAUSED)&&(K=setTimeout(y,ft))}function y(){if(Q==f.PLAYING){ut.incrementRebufferCount(),ut.incrementPauses();var e=$(d.PAUSE,null);P(e),lt++,Q=f.PAUSED}}function k(){null!=K&&(clearTimeout(K),K=null)}function E(e){return e==f.PLAYING||e==f.PAUSED}function w(){z&&(clearTimeout(z),z=null)}function S(e){return e==d.PLAY?f.PLAYING:e==d.PAUSE?f.PAUSED:e==d.BUFFER?f.BUFFERING:e==d.END?f.IDLE:null}function x(e,t,i){if(w(),i)z=setTimeout(function(e,t){return function(){x(e,t)}}(e,t),i);else if(R(e)){var s=F(),r=at,a=L(t),o=r>=0?a-r:0;I(F(),t),N(e,t),U(F()),M(e);for(var l=0,u=nt.length;u>l;l++)nt[l](s,e,t,o);T(t),ut.setRegisters(t,e),ut.getClip().setRegisters(t,e);var c=$(f.toEventType(e),t);n.extend(c,t),O(J)&&(P(c),Q=J,lt++)}}function T(e){var t=e.ns_st_mp;null!=t&&(Z=t,delete e.ns_st_mp),t=e.ns_st_mv,null!=t&&(et=t,delete e.ns_st_mv),t=e.ns_st_ec,null!=t&&(lt=Number(t),delete e.ns_st_ec)}function P(e,n){void 0===n&&(n=!0),n&&A(e);var i=it.getPixelURL();if(Y){if(!C()){var s=bt.am,r=bt.et,a=s.newApplicationMeasurement(Y,r.HIDDEN,e,i);Y.getQueue().offer(a)}}else i&&l.httpGet(t(i,e))}function C(){var e=Y.getAppContext(),t=Y.getSalt(),n=Y.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length}function A(e){tt=$(null),n.extend(tt,e)}function I(e,t){var i=L(t);if(e==f.PLAYING)ut.addPlaybackTime(i),o(),_();else if(e==f.BUFFERING)ut.addBufferingTime(i),k();else if(e==f.IDLE){var s=n.getKeys(ut.getClip().getLabels());ut.getClip().reset(s)}}function N(e,t){var n=L(t),i=D(t);ot=i,e==f.PLAYING?(a(),p(),ut.getClip().setPlaybackTimestamp(n),O(e)&&(ut.getClip().incrementStarts(),ut.getStarts()<1&&ut.setStarts(1))):e==f.PAUSED?O(e)&&ut.incrementPauses():e==f.BUFFERING?(ut.getClip().setBufferingTimestamp(n),ht&&b()):e==f.IDLE&&u()}function O(e){return e!=f.PAUSED&&e!=f.IDLE||Q!=f.IDLE&&null!=Q?e!=f.BUFFERING&&Q!=e:!1}function D(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=n.getInteger(e.ns_st_po)),t}function L(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function R(e){return null!=e&&F()!=e}function M(e){J=e,at=+new Date}function F(){return J}function U(e){G=e}function $(){var e,t;1==arguments.length?(e=f.toEventType(J),t=arguments[0]):(e=arguments[0],t=arguments[1]);var i={};if("undefined"!=typeof document){var s=document;i.c7=s.URL,i.c8=s.title,i.c9=s.referrer}return null!=t&&n.extend(i,t),i.hasOwnProperty("ns_ts")||(i.ns_ts=String(+new Date)),null!=e&&!i.hasOwnProperty("ns_st_ev")&&(i.ns_st_ev=d.toString(e)),it.isPersistentLabelsShared()&&Y&&n.extend(i,Y.getLabels()),n.extend(i,it.getLabels()),V(e,i),ut.createLabels(e,i),ut.getClip().createLabels(e,i),i.hasOwnProperty("ns_st_mp")||(i.ns_st_mp=Z),i.hasOwnProperty("ns_st_mv")||(i.ns_st_mv=et),i.hasOwnProperty("ns_st_ub")||(i.ns_st_ub="0"),i.hasOwnProperty("ns_st_br")||(i.ns_st_br="0"),i.hasOwnProperty("ns_st_pn")||(i.ns_st_pn="1"),i.hasOwnProperty("ns_st_tp")||(i.ns_st_tp="1"),i.hasOwnProperty("ns_st_it")||(i.ns_st_it="c"),i.ns_st_sv=m.STREAMSENSE_VERSION,i.ns_type="hidden",i}function V(e,t){var i=t||{};if(i.ns_st_ec=String(lt),!i.hasOwnProperty("ns_st_po")){var s=ot,r=L(i);(e==d.PLAY||e==d.KEEP_ALIVE||e==d.HEART_BEAT||null==e&&J==f.PLAYING)&&(s+=r-ut.getClip().getPlaybackTimestamp()),i.ns_st_po=n.getInteger(s)}return e==d.HEART_BEAT&&(i.ns_st_hc=String(mt)),i}function q(e){var t=L(e);0>t&&(e.ns_ts=String(+new Date))}function j(e,t,n){t=t||{},t.ns_st_ad=1,e>=d.AD_PLAY&&e<=d.AD_CLICK&&it.notify(e,t,n)}function H(e,t){it.notify(d.CUSTOM,e,t)}var B,z,G,J,Y,K,W,X,Q,Z,et,tt,nt,it=this,st=500,rt=null,at=0,ot=0,lt=0,ut=null,ct=!0,ht=!0,pt=m.DEFAULT_HEARTBEAT_INTERVAL,dt=m.DEFAULT_KEEP_ALIVE_INTERVAL,ft=m.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,gt=0,mt=0,_t=0,vt=!1,bt={};l.autoSelect(),n.extend(this,{reset:function(e){ut.reset(e),ut.setPlaylistCounter(0),ut.setPlaylistId(+new Date+"_1"),ut.getClip().reset(e),null==e||e.isEmpty()?B={}:n.filterMap(B,e),lt=1,mt=0,o(),u(),_(),k(),w(),J=f.IDLE,G=null,at=-1,Q=null,Z=m.DEFAULT_PLAYERNAME,et=m.STREAMSENSE_VERSION,tt=null},setPauseOnBufferingInterval:function(e){ft=e},getPauseOnBufferingInterval:function(){return ft},setKeepAliveInterval:function(e){dt=e},getKeepAliveInterval:function(){return dt},setHeartbeatIntervals:function(e){pt=e},notify:function(){var e,t,i,s;t=arguments[0],3==arguments.length?(i=arguments[1],s=arguments[2]):(i={},s=arguments[1]),e=S(t);var r=n.extend({},i);if(q(r),r.hasOwnProperty("ns_st_po")||(r.ns_st_po=n.getInteger(s).toString()),t==d.PLAY||t==d.PAUSE||t==d.BUFFER||t==d.END)it.isPausePlaySwitchDelayEnabled()&&E(J)&&E(e)&&(J!=f.PLAYING||e!=f.PAUSED||z)?x(e,r,st):x(e,r);else{var a=$(t,r);n.extend(a,r),P(a,!1),lt++}},getLabels:function(){return B},getState:function(){return J},setLabels:function(e){null!=e&&(null==B?B=e:n.extend(B,e))},getLabel:function(e){return B[e]},setLabel:function(e,t){null==t?delete B[e]:B[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),s=0,r=i.length;r>s;s++){var a=i[s],o=a.split("=");2==o.length?it.setLabel(o[0],t(o[1])):1==o.length&&it.setLabel(m.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,n+1)}}else e+="?";return rt=e},getPixelURL:function(){return rt?rt:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?rt=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?rt=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPersistentLabelsShared:function(){return ct},setPersistentLabelsShared:function(e){ct=e},isPauseOnBufferingEnabled:function(){return ht},setPauseOnBufferingEnabled:function(e){ht=e},isPausePlaySwitchDelayEnabled:function(){return vt},setPausePlaySwitchDelayEnabled:function(e){vt=e},setPausePlaySwitchDelay:function(e){e&&e>0&&(st=e)},getPausePlaySwitchDelay:function(){return st},setClip:function(e,t){var n=!1;return J==f.IDLE&&(ut.getClip().reset(),ut.getClip().setLabels(e,null),t&&ut.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return J==f.IDLE&&(ut.incrementPlaylistCounter(),ut.reset(),ut.getClip().reset(),ut.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=n.extend({},e);ut.setRegisters(t,null),ut.getClip().setRegisters(t,null),T(t),lt++},exportState:function(){return tt},getVersion:function(){return m.STREAMSENSE_VERSION},addListener:function(e){nt.push(e)},removeListener:function(e){nt.splice(n.indexOf(e,nt),1)},getClip:function(){return ut.getClip()},getPlaylist:function(){return ut}}),n.extend(this,{adNotify:j,customNotify:H,viewNotify:function(t,n){t=t||it.getPixelURL(),t&&e(t,n)}}),ns_.comScore&&(bt=ns_.comScore.exports,Y=bt.c()),B={},lt=1,J=f.IDLE,ut=new v,K=null,ht=!0,X=null,mt=0,u(),W=null,z=null,vt=!1,Q=null,ot=0,nt=[],it.reset(),i&&it.setLabels(i),s&&it.setPixelURL(s)};return function(e){function t(e,t){return E[S]||s(e,t)}function i(){S=-1;for(var e=0;w>=e;e++)if(E.hasOwnProperty(e)){S=e;break}return ns_.StreamSense.activeIndex=S,S}function s(e,t){return e=e||null,t=t||null,e&&"object"==typeof e&&(t=e,e=null),E[++w]=new ns_.StreamSense(t,e),i(),E[w]}function r(){var e=!1,t=S;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var n in E)if(E[n]===arguments[0]){t=n;break}return E.hasOwnProperty(t)&&(e=E[t],delete E[t],e.reset(),i()),e}function a(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()}function o(e,n,i){return e=e||{},"number"==typeof n&&(e.ns_st_cn=n),t().setClip(e,i),t().getClip()}function l(e,n,i){return"undefined"==typeof e?!1:(i=i||null,n=n||{},t().notify(e,n,i))}function u(e){"undefined"!=typeof e&&t().setLabels(e)}function c(){return t().getLabels()}function h(e){"undefined"!=typeof e&&t().getPlaylist().setLabels(e)}function p(){return t().getPlaylist().getLabels()}function d(e){"undefined"!=typeof e&&t().getClip().setLabels(e)}function f(){return t().getClip().getLabels()}function g(e){return t().reset(e||{})}function m(e){return t().getPlaylist().reset(e||{})}function _(e){return t().getClip().reset(e||{})}function v(e){return e=e||{},t().viewNotify(null,e)}function b(e,n){return arguments.length>2&&(e=arguments[1],n=arguments[2]),e=e||{},"number"==typeof n&&(e.ns_st_po=n),t().customNotify(e,n)}function y(){return t().exportState()}function k(e){t().importState(e)}var E={},w=-1,S=-1;n.extend(e,{activeIndex:S,newInstance:s,"new":s,destroyInstance:r,destroy:r,newPlaylist:a,newClip:o,notify:l,setLabels:u,getLabels:c,setPlaylistLabels:h,getPlaylistLabels:p,setClipLabels:d,getClipLabels:f,resetInstance:g,resetPlaylist:m,resetClip:_,viewEvent:v,customEvent:b,exportState:y,importState:k})}(i),i}();return b.AdEvents=g,b.PlayerEvents=d,ns_.StreamingTag=ns_.StreamingTag||function(){var e=function(){var e=function(e){function t(){if(!ns_.comScore&&n.exists(e))if(y=n.isTrue(e.debug),n.exists(e.customerC2)){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");v.setPixelURL(t+".scorecardresearch.com/p?c1=2"),v.setLabel("c2",e.customerC2)}else v.setPixelURL(""),y&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");v.setLabel("ns_st_it","r")}function i(e){return n.exists(e)||(e={}),n.exists(e.ns_st_ci)||(e.ns_st_ci="0"),n.exists(e.c3)||(e.c3="*null"),n.exists(e.c4)||(e.c4="*null"),n.exists(e.c6)||(e.c6="*null"),e}function s(e){return p>0&&e>=p?g+=e-p:g=0,g}function r(e){v.getState()!=f.IDLE&&v.getState()!=f.PAUSED?v.notify(d.END,s(e)):v.getState()==f.PAUSED&&v.notify(d.END,g)}function a(e){return o("ns_st_ci",m,e)&&o("c3",m,e)&&o("c4",m,e)&&o("c6",m,e)}function o(e,t,i){if(n.exists(e)&&n.exists(t)&&n.exists(i)){var s=t[e],r=i[e];return n.exists(s)&&n.exists(r)&&s===r}return!1}function l(e,t){r(e),h++;var i={ns_st_cn:h,ns_st_pn:"1",ns_st_tp:"0"};n.extend(i,t),v.setClip(i),m=t,p=e,g=0,v.notify(d.PLAY,g)}function u(e){var t=+new Date;r(t),h++,e=i(e);var s={ns_st_cn:h,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};n.extend(s,e),v.setClip(s),g=0,v.notify(d.PLAY,g),p=t,_=!1}function c(e,t){var n=+new Date;e=i(e),E==k.None&&(E=t),_&&E==t&&a(e)?(v.getClip().setLabels(e),v.getState()!=f.PLAYING&&(p=n,v.notify(d.PLAY,g))):l(n,e),_=!0,E=t}var h=0,p=0,g=0,m=null,_=!1,v=new b,y=!1,k={None:0,AudioContent:1,VideoContent:2},E=k.None;n.extend(this,{playAdvertisement:function(){y&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var e={ns_st_ct:"va"};u(e)},playVideoAdvertisement:function(e){var t={ns_st_ct:"va"};e&&n.extend(t,e),u(t)},playAudioAdvertisement:function(e){var t={ns_st_ct:"aa"};e&&n.extend(t,e),u(t)},playContentPart:function(e){y&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&n.extend(t,e),c(t,k.VideoContent)},playVideoContentPart:function(e){var t={ns_st_ct:"vc"};e&&n.extend(t,e),c(t,k.VideoContent)},playAudioContentPart:function(e){var t={ns_st_ct:"ac"};e&&n.extend(t,e),c(t,k.AudioContent)},stop:function(){var e=+new Date;v.notify(d.PAUSE,s(e))}}),t()};return function(){}(e),e}();return e}(),b}(),define("vendor/stream_sense",[],function(){"use strict";return window.ns_}),define("lib/videoMetrix",["lodash","utils/ted","vendor/stream_sense","exports"],function(e,t,n,i){"use strict";i.init=function(e){this._init(),this._setContext(e)},i.start=function(){this._play()},i.stop=function(){this._tag&&this._tag.stop()},i.startAd=function(){this._asset.isInAd=!0,this._play()},i.stopAd=function(){this._asset.isInAd=!1,this._play()},i._meta=null,i._asset=null,i._tag=null,i._init=e.once(function(){i._tag=new n.StreamingTag({customerC2:t("csClientId")})}),i._setContext=function(e){var t={};e.talkId&&(t.ns_st_ci=e.talkId),this._meta=t,this._asset={isInAd:!1,isVideo:!0}},i._reset=function(){i._meta=null,i._asset=null,i._tag=null},i._play=function(){this._tag&&(this._asset.isInAd?this._asset.isVideo?this._tag.playVideoAdvertisement():this._tag.playAudioAdvertisement():this._asset.isVideo?this._tag.playVideoContentPart(this._meta):this._tag.playAudioContentPart(this._meta))}}),define("widgets/player/cs-tracker",["jquery","utils/ted","lib/videoMetrix"],function(e,t,n){"use strict";function i(t){t._isInternal&&(this._data={lastMetaTalkId:null,lastPlayTalkId:null},this._widget=t,this._addHandlers(),e(window).unload(function(){n.stop()}))}return i.prototype._sendViewBeacon=function(e){var n=window.COMSCORE;n&&n.beacon&&n.beacon({c1:"1",c2:t("csClientId"),c5:"02",c6:e})},i.prototype._sendPostrollBeacon=function(){var e=window.COMSCORE;e&&e.beacon&&e.beacon({c1:"1",c2:t("csClientId"),c5:"10"})},i.prototype._onTalkPlay=function(e){this._sendViewBeacon(e)},i.prototype._addHandlers=function(){var e=this,t={playertalk:function(e,t){n.init({talkId:t.id})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(t),e._data.lastPlayTalkId=t),n.start()},playerpause:function(){n.stop()},playercomplete:function(){n.stop()},playerprerollstart:function(){n.startAd()},playerprerollcomplete:function(){n.stopAd()},playerpostrollstart:function(){e._sendPostrollBeacon(),n.startAd()},playerpostrollcomplete:function(){n.stopAd()}};this._handlers=t,this._widget._on(t)},i}),define("utils/f",[],function(){"use strict";var e=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e[t].apply(e,n)}};return e.create=function(e){return function(){var t=arguments,n=function(){return e.apply(this,t)};return n.prototype=e.prototype,new n}},e.get=function(e){return function(t){return t.get&&"function"==typeof t.get?t.get(e):t[e]&&"function"==typeof t[e]?t[e].call(t):t[e]}},e.splat=function(){var t=Array.prototype.slice.call(arguments);return function(n){for(var i=[],s=0;s<t.length;s++)i.push(e.get(t[s]).call(n));return i}},e.send=function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t)}},e.and=function(){var e=Array.prototype.slice.call(arguments);return function(t){for(var n=!0,i=0;i<e.length;i++)n=n&&e[i].call(null,t);return n}},e.not=function(e){return function(){return!e.apply(null,arguments)}},e.ascending=function(e,t){return e-t},e.descending=function(e,t){return t-e},e.truthy=function(e){return!!e},e.falsey=e.not(e.truthy),e}),define("player/topicFactory",["jquery"],function(e){"use strict";function t(n,i,s){var r,a;for(r=0,a=i.length;a>r;r++)e.isArray(i[r])?t(n,i[r],s):i[r].apply(n,s)}return function(n){var i={};return function(s){var r,a=s&&i[s];if(!a){r=e.Callbacks(n&&n.hasOwnProperty(s)?n[s]:"memory"),a={publish:r.fire,subscribe:r.add,unsubscribe:r.remove,once:function(){function e(){t(r,n,arguments),r.remove(e)}var n=arguments;return r.add(e)},publishUnique:function(){var e;return window.JSON?function(){var t=Array.prototype.slice.call(arguments,0),n=JSON.stringify(t);n!==e&&(r.fire.apply(r,t),e=n)}:!1}()};var o=null;r.add(function(e){o=e}),a.read=function(){return o},s&&(i[s]=a)}return a}}}),define("player/getFlashVars",["jquery"],function(){"use strict";function e(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));
return t.join("&")}return function(t){t.options;return e({serviceHost:"https://www.ted.com",volume:t.config.get("volume"),autoplay:0,fullscreenEnabled:t.canFullScreen?0:1})}}),define("player/handleError",["jquery"],function(e){"use strict";return function(t){e.post("http://www.ted.com/error_collector.php",{message:t})}}),define("player/hlsVastParser",["jquery","./topicFactory","./handleError"],function(e,t,n){"use strict";function i(e){this.vast=e,this.topic=t({companion:void 0}),this.loadCompanions()}function s(e){this.vastData=e,this.url=this.vastData.find("IFrameResource").text()}e.extend(i.prototype,{loadCompanions:function(){var e=this;this.preroll=new s(this.vast.find("Companion[width=6][height=7]")),this.companion=new s(this.vast.find("Companion[width=6][height=8]")),this.companion.load(function(t){t&&e.topic("companion").publish(t)})},sponsor:function(){var e={},t=this.vast.find("AdParameters").text().split("=");return e[t[0]]=t[1],e},prerollUrl:function(){return[this.preroll.url]},impressionUrl:function(){return[this.vast.find("Impression").text()]},clickUrl:function(){return this.vast.find("ClickThrough").text()}});var r=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","rewind","pause","resume","fullscreen","creativeView"];return r.forEach&&r.forEach(function(t){i.prototype[t+"Url"]=function(){return e.makeArray(this.vast.find("Linear Tracking[event="+t+"]").map(function(t,n){return e(n).text()}))}}),e.extend(s.prototype,{load:function(t){var i=this;return""==this.url?t():void e.getJSON(this.url).done(function(e){i.ad=e.companion?{type:"companion-mobile",dimensions:{width:320,height:50},hasDisplay:!0,houseAd:!1,creative:[{density:1,url:e.companion.creative.standard},{density:2,url:e.companion.creative.standard_2x}],impression:null,thirdPartyImpressions:e.companion.impression,click:e.companion.click,lineItemId:null,creativeId:null}:e.ad,t(i.ad)}).fail(function(e,t){n({context:"hls",error:"Error retrieving companion ad",status:t,url:i.url})})}}),i}),define("player/hlsInitTalk",["jquery","./hlsVastParser","./handleError"],function(e,t,n){"use strict";function i(n){var i=new e.Deferred,s=i.promise();return n=n.replace("%5Bcorrelator%5D",Math.random().toFixed(12).substr(2)),e.get(n).then(function(n){i.resolve(new t(e(n)))},function(e,t,n){i.reject(t,n)}),s}return function(t,s){var r=new e.Deferred,a=r.promise(),o={};try{var l=t.currentTalk.resources.hls.stream,u=t.currentTalk.resources.hls.adUrl}catch(c){return t.throwError({type:"init",message:"Missing HLS stream resource.",severity:"fatal"}),r.reject(),a}return i(u).done(function(n){t.vastAd=n,e.extend(o,n.sponsor())}).fail(function(e){n({context:"hls",error:"Error retrieving VAST ad",status:e,url:t.currentTalk.resources.hls.adUrl})}).always(function(){s.attr("src",l+"?"+e.param(o)),r.resolve()}),a}}),define("player/replaceElement",["jquery","./getFlashVars","./hlsVastParser","./hlsInitTalk","swfobject"],function(e,t,n,i){"use strict";function s(e){return e.id||(e.id="ted-player-"+l++),e.id}function r(e){var n={bgcolor:"#000000",quality:"high",wmode:"opaque",allowscriptaccess:"always",allowfullscreen:"true"},i=e.options,r=s(i.el);if("OBJECT"!==i.el.nodeName){var a=t(e),o=i.attrs;n.flashvars=a,o.data=i.swf,swfobject.createSWF(o,n,r)}e.el=document.getElementById(r),e.topic("ready.dom").publish()}function a(t){var n,i=t.options,r=e("<video>"),a=s(i.el);t.currentTalk=i.talks[0],n=t.currentTalk.resources.h264[0].file,r.attr(i.attrs),t.options.shareToken&&(n=n+"&share_token="+t.options.shareToken),r.attr("preload","none"),r.attr("src",n),r.attr("id",a),e(i.el).replaceWith(r),t.el=r[0],t.topic("ready.dom").publish()}function o(t){var n=t.options,r=e("<video>"),a=s(n.el);t.currentTalk=n.talks[0],r.attr(n.attrs),r.attr("id",a),i(t,r).always(function(){e(n.el).replaceWith(r),t.el=r[0],t.topic("ready.dom").publish()})}var l=Math.floor(9999*Math.random()),u={flash:r,h264:a,hls:o};return function(e){return u[e.mode]?u[e.mode](e):void e.throwError({type:"init",message:"Cannot replace element for unrecognized player mode: "+mode,severity:"fatal"})}}),define("player/getSupportedMode",["jquery","swfobject"],function(e){"use strict";function t(e){return n.canPlayType(e).replace(/^no$/,"")}var n=document.createElement("video"),i=["flash","h264","hls"];return function(s){var r=navigator.userAgent.toLowerCase(),a=r.indexOf("windows nt")>-1&&r.indexOf("; arm;")>-1;if(s.mode&&-1!==e.inArray(s.mode,i))return s.mode;if(!a&&-1===r.indexOf("android")&&swfobject.hasFlashPlayerVersion(s.flashVersion))return"flash";try{if(!n.canPlayType)return!1;if(-1===r.indexOf("android")&&-1===r.indexOf("googletv")&&(t("application/vnd.apple.mpegURL")||t("application/x-mpegURL")))return"hls";if(t('video/mp4; codecs="avc1.42E01E"'))return"h264"}catch(o){}return!1}}),define("player/checkRequiredParams",[],function(){"use strict";var e=["el","talks"];return function(t,n){for(var i=!0,s=e.length;s--;)t[e[s]]||(n({type:"init",message:"Required option property is missing: "+e[s],severity:"fatal"}),i=!1);return i}}),define("player/throttle",["jquery"],function(e){"use strict";return function(t,n,i,s){var r,a=0;"boolean"!=typeof n&&(s=i,i=n,n=void 0);var o=function(){function e(){a=+new Date,i.apply(l,c)}function o(){r=void 0}var l=this,u=+new Date-a,c=arguments;s&&!r&&e(),r&&clearTimeout(r),void 0===s&&u>t?e():n!==!0&&(r=setTimeout(s?o:e,void 0===s?t-u:t))};return e.guid&&(o.guid=i.guid=i.guid||e.guid++),o}}),define("player/flashifySource",[],function(){"use strict";return function(e){return e+(-1===e.indexOf("?")?"?":"&")+"preroll=Blank&qr&network=tv"}}),define("player/getTalk",[],function(){"use strict";return function(e,t,n){var i,s=e.options.talks,r=s.length;for(n||(n=0),t=+t;r--;)if(i=s[r],i.id===t)return s[r+n]}}),define("player/getLanguage",[],function(){"use strict";return function(e,t){if(!e.languages||!t)return!1;for(var n=e.languages.length;n--;)if(e.languages[n].languageCode===t)return e.languages[n];return!1}}),define("player/addHandlersFlash",["jquery","./flashifySource","./throttle","./getTalk","./getLanguage"],function(e,t,n,i,s){"use strict";var r=n(100,function(e,t){e("currentTime").publishUnique(t)}),a=n(100,function(e,t){e("postrollRemaining").publishUnique(t)});return function(n){function o(t,o){switch(t){case"player.error":n.throwError(e.extend({},o,{type:"flash"}));break;case"player.pause":p=!1,l("pause").publish();break;case"player.seeked":n._isFirstPlaying||l("seeked").publish();break;case"player.seeking":n._isFirstPlaying||(l("seeking").publish(),p&&(d=!0));break;case"player.play":n._isFirstPlaying=!1,l("ready.seekable").publish(),u&&(l("bufferPlayable").publish(),u=!1),p=!0,(n._isRequestedPlay||!d)&&l("play").publish(),d=!1,n._isRequestedPlay=!1;break;case"player.complete":p=!1,l("complete").publish(n.currentTalk);break;case"player.talk.complete":p=!1,l("talkComplete").publish(n.currentTalk);break;case"player.ready":l("ready.flashInterface").publish();break;case"player.loaded":l("ready.flashTalk").publish();var f=i(n,o.talkId),g=n.config.get("languageCode"),m=s(f,g);n.currentTalk=f,l("talk").publishUnique(f),m||f.nativeLanguage===n.options.nativeLanguage||(m=s(f,n.options.nativeLanguage)),m?(n.el.setLanguage(m.languageCode,m.isRtl),l("subtitle").publishUnique(m)):n.el.setLanguage(null,null),h&&n.el.playVideo(),h=!0;break;case"player.metadata":l("duration").publishUnique(o.duration);break;case"player.timeupdate":r(l,o.time);break;case"player.volumechange":var _=Math.round(1e3*+o.volume)/1e3;(_>0||!c)&&l("volume").publishUnique(_);break;case"player.ad.preroll.block":l("adBlock").publish(),l("prerollBlock").publish();break;case"player.ad.preroll.start":l("prerollStart").publish();break;case"player.ad.preroll.end":l("prerollComplete").publish();break;case"player.ad.postroll.start":l("postrollStart").publish();break;case"player.ad.postroll.end":l("postrollComplete").publish();break;case"player.ad.postroll.duration":l("postrollDuration").publish(o.duration);break;case"player.ad.postroll.remaining":a(l,o.time);break;case"player.buffer.empty":u||(u=!0,l("bufferUnplayable").publish());break;case"player.mouse.down":n.postrolling?l("postrollClick").publish():n.toggle();break;case"player.metrics":l("metricsData").publish(o);break;case"player.metrics.toggle":l("metricsToggle").publish()}}var l=n.topic,u=!1,c=n.config.get("muted");l("muted").subscribe(function(e){c=e}),l("ready.flashInterface").once(function(){var e=n.currentTalk||n.options.talks[0];n.currentTalk=e,n.el.load(e.id,t(e.resources.hls.stream),e.introDuration,e.adDuration)}),l("ready.flashTalk").once(function(){l("ready.handlers").publish()});var h,p,d;window.onPlayerEvent=function(e,t){try{o(e,t)}catch(i){if(!i)return;n.throwError({message:i.message,stack:i.stack})}};var f=n.options.history,g=[];if(f&&f.length)for(var m=-1,_=f.length;++m<_;)window.onPlayerEvent.apply(g.slice.apply(f[m]))}}),define("player/isLastTalk",[],function(){"use strict";return function(e){return e.currentTalk.id===e.options.talks[e.options.talks.length-1].id}}),define("player/addHandlersH264",["jquery","./throttle","./isLastTalk"],function(e,t){"use strict";function n(e){var t=e.topic,n={};t("play").subscribe(function(){n={}}),t("talkComplete.unnormalized").subscribe(function(){var i=e.currentTalk||{};n.id&&i.id==n.id||t("talkComplete").publish(i),n=i})}return function(i){var s=i.topic,r=i.el,a=e(r);n(i),e.each(["play","pause","seeked","seeking"],function(e,t){a.on(t,function(){s(t).publish()})}),a.on("canplay",function(){var e;return function(){e&&r.play(),e=!0}}()),a.on("timeupdate",t(100,function(){s("currentTime").publishUnique(r.currentTime)})),a.on("durationchange",function(){s("duration").publishUnique(r.duration)}),a.on("ended",function(){s("talkComplete.unnormalized").publish(),s("complete").publish(i.currentTalk)}),a.on("volumechange",function(){s("volume").publishUnique(Math.round(1e3*+r.volume)/1e3),s("muted").publishUnique(r.muted)}),a.on("loadedmetadata",function(){s("ready.seekable").publish()})}}),define("player/addHandlersHls",["jquery","./handleError"],function(e,t){"use strict";function n(i){var r=i.el,a=i.topic;e(r).on("error",function(){t({context:"hls",error:"Error playing video",currentTime:r.currentTime,src:r.src,code:r.error?r.error.code:void 0})});var o;a("talk").subscribe(function(e){o!==e.id&&(s(i),o=e.id)}),a("currentTime").subscribe(n.checkAdEvents)}function i(e){var t=new Image;t.src=e}function s(s){function r(e){c.push(n.createAdEvent(e))}var a,o=s.topic,l=s.vastAd;n.adEvents=[];try{a=s.currentTalk.resources.hls.metadata}catch(u){return void s.throwError({type:"init",message:"Missing HLS metadata for current talk.",severity:"fatal"})}if(!l)return void s.throwError({type:"hls",message:"Error retrieving VAST ad on talk change."});l.topic("companion").subscribe(function(e){o("ad").publish(e)});var c=[];e.getJSON(a,l.sponsor()).then(function(e){var t=e.timing;r({startsAt:Math.floor(t.outro.end)-1,onFirstStart:function(){l.impressionUrl().forEach(i)}}),r({startsAt:8,endsAt:12,onFirstStart:function(){l.prerollUrl().forEach(i)},onEveryStart:function(){o("prerollStart").publish()},onEveryEnd:function(){o("prerollComplete").publish()}}),t.ad&&(r({startsAt:Math.floor(t.ad.start),endsAt:Math.floor(t.ad.end),onFirstStart:function(){l.startUrl().forEach(i),l.creativeViewUrl().forEach(i)},onEveryStart:function(){o("talkComplete.unnormalized").publish(),o("postrollStart").publish()},onEveryEnd:function(){o("postrollComplete").publish()}}),r({startsAt:Math.floor(t.ad.start+(t.ad.end-t.ad.start)/4),endsAt:Math.floor(t.ad.end),onFirstStart:function(){l.firstQuartileUrl().forEach(i)}}),r({startsAt:Math.floor(t.ad.start+(t.ad.end-t.ad.start)/2),endsAt:Math.floor(t.ad.end),onFirstStart:function(){l.midpointUrl().forEach(i)}}),r({startsAt:Math.floor(t.ad.start+3*(t.ad.end-t.ad.start)/4),endsAt:Math.floor(t.ad.end),onFirstStart:function(){l.thirdQuartileUrl().forEach(i)}}),r({startsAt:Math.floor(t.ad.end)-1,endsAt:Math.floor(t.ad.end),onFirstStart:function(){l.completeUrl().forEach(i)}})),n.adEvents=c}).fail(function(e,n){t({context:"hls",error:"Error retrieving HLS metadata",status:n,uri:a,query:l.sponsor()})})}function r(e){e.isCurrent||(e.onEveryStart(),e.hasEverStarted||(e.onFirstStart(),e.hasEverStarted=!0),e.isCurrent=!0)}function a(e){e.isCurrent&&(e.onEveryEnd(),e.hasEverEnded||(e.onFirstEnd(),e.hasEverEnded=!0),e.isCurrent=!1)}return n.adEvents=[],n.createAdEvent=function(t){return e.extend({startsAt:0,endsAt:-1,onFirstStart:e.noop,onFirstEnd:e.noop,onEveryStart:e.noop,onEveryEnd:e.noop},t,{isCurrent:!1,hasEverStarted:!1,hasEverEnded:!1})},n.checkAdEvents=function(e){for(var t,i=n.adEvents,s=i.length,o=0;s>o;o++)t=i[o],e>=t.startsAt&&(e<t.endsAt||-1===t.endsAt)?r(t):t.isCurrent&&a(t)},n}),define("player/addHandlers",["./throttle","./addHandlersFlash","./addHandlersH264","./addHandlersHls","./isLastTalk"],function(e,t,n,i,s){"use strict";function r(t){var n,i,s=e(100,function(){n&&i&&t("progress").publishUnique(n/i)});t("currentTime").subscribe(function(e){n=e,s()}),t("duration").subscribe(function(e){i=e,n=0,s()}),t("progress").publish(0)}return function(e){var a=e.mode,o=e.topic;switch(a){case"flash":t(e);break;case"h264":n(e);break;case"hls":n(e),i(e);break;default:return void e.throwError({type:"init",message:"No handlers found for unrecognized player mode: "+a,severity:"fatal"})}"flash"!==a&&o("ready.handlers").publish(),e.options.talks[0]&&o("duration").publish(e.options.talks[0].duration),o("duration").subscribe(function(t){e.currentTalk?e.currentTalk.duration=t:e.options.talks[0].duration=t}),o("complete").subscribe(function(){s(e)?o("ended").publish(e.currentTalk):e.playNext()}),r(o),o("postrollStart").subscribe(function(){e.postrolling=!0}),o("postrollComplete").subscribe(function(){e.postrolling=!1}),o("talk").subscribe(function(){e.postrolling=!1})}}),define("player/actionsFlash",["jquery","./flashifySource","./getTalk","./getLanguage"],function(e,t,n,i){"use strict";var s={};return e.each({pause:"pauseVideo",seek:"seek",sendAds:"sendAds",capQualityToStage:"capQualityToStage"},function(e,t){s[e]=function(){var e=this.el[t];e&&e.apply(this.el,[].slice.call(arguments))}}),s.play=function(){this._isRequestedPlay=!0,this.lastPlayedTalkId==(this.currentTalk&&this.currentTalk.id)?this.el.resumeVideo():(this._isFirstPlaying=!0,this.el.playVideo())},s.playTalk=function(e){var i=n(this,e);i&&this.currentTalk!=i?(this._isFirstPlaying=!0,this.currentTalk=i,this.el.load(i.id,t(i.resources.hls.stream),i.introDuration,i.adDuration)):this.play()},s.mute=function(e){this.el.volume(e?0:this.config.get("volume"))},s.subtitle=function(e){var t=i(this.currentTalk,e);t?this.el.setLanguage(t.languageCode,t.isRtl):this.el.setLanguage(null,null),this.config.set("languageCode",t?t.languageCode:!1),this.topic("subtitle").publishUnique(t)},s.volume=function(e){this.el.volume(e)},s._playbackRate=function(){},s}),define("player/actionsH264",["jquery","./getTalk"],function(e,t){"use strict";var n={};return n.play=function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},n.pause=function(){this.el.pause()},n.playTalk=function(e){var n=t(this,e);n&&(this.currentTalk=n,this.topic("talk").publishUnique(n),this.el.src=n.resources.h264[0].file)},n.mute=function(e){this.el.muted=e},n.seek=function(e){this.el.currentTime=e},n.volume=function(e){this.el.volume=e},n._playbackRate=function(e){this.el.playbackRate=e},n}),define("player/actionsHls",["jquery","./getTalk","./hlsInitTalk"],function(e,t,n){"use strict";var i={};return i.play=function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},i.pause=function(){this.el.pause()},i.playTalk=function(i){var s=t(this,i),r=this.topic;s&&this.currentTalk!=s?(this.currentTalk=s,n(this,e(this.el)).always(function(){r("talk").publishUnique(s)})):this.play()},i.playNext=function(){var e=t(this,this.currentTalk.id,1);e&&this.playTalk(e.id)},i.playPrev=function(){var e=t(this,this.currentTalk.id,-1);e&&this.playTalk(e.id)},i.mute=function(e){this.el.muted=e},i.seek=function(e){this.el.currentTime=e},i.volume=function(e){this.el.volume=e},i._playbackRate=function(e){this.el.playbackRate=e},i}),define("player/getFullScreenActions",["jquery"],function(e){"use strict";function t(t){function n(){t.topic("enterFullScreen").publish(),t.isFullScreen=!0}function i(){t.topic("exitFullScreen").publish(),t.isFullScreen=!1}var s=document,a=t.fullScreenMode,o=r[a];"webkitVideo"===a?(e(t.el).on("webkitbeginfullscreen",n),e(t.el).on("webkitendfullscreen",i)):o&&e(s).on(o.change,function(){s[o.element]===t.fullScreenElement?n():!s[o.element]&&t.isFullScreen&&i()})}function n(e){function t(){n.webkitEnterFullscreen()}var n=e.el;n.readyState>=1?t(e):(n.addEventListener("loadedmetadata",t,!1),e.play())}function i(e){var t=e.fullScreenMode,n=window.document;"webkitVideo"===t?e.el.webkitExitFullscreen():r[t]&&n[r[t].cancel]()}function s(e,t){var i=e.fullScreenMode;"webkitVideo"===i?n(e):r[i]?(e.fullScreenElement=t,t[r[i].request]()):e.throwError({type:"client",message:"Full screen mode not supported",severity:"warning"})}var r={standard:{cancel:"cancelFullScreen",change:"fullscreenchange",enabled:"fullscreenEnabled",error:"fullscreenerror",element:"fullscreenElement",request:"requestFullScreen"},moz:{cancel:"mozCancelFullScreen",change:"mozfullscreenchange",enabled:"mozFullScreenEnabled",error:"mozfullscreenerror",element:"mozFullScreenElement",request:"mozRequestFullScreen"},ms:{cancel:"msExitFullscreen",change:"MSFullscreenChange",enabled:"msFullscreenEnabled",error:"MSFullscreenError",element:"msFullscreenElement",request:"msRequestFullscreen"},webkit:{cancel:"webkitCancelFullScreen",change:"webkitfullscreenchange",enabled:"webkitFullscreenEnabled",error:"webkitfullscreenerror",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen"}};return function(e){return t(e),{requestFullScreen:function(t){s(e,t||e.el)},cancelFullScreen:function(){i(e)}}}}),define("player/addActions",["jquery","./actionsFlash","./actionsH264","./actionsHls","./getTalk","./getFullScreenActions"],function(e,t,n,i,s,r){"use strict";var a={flash:t,h264:n,hls:i};return function(e){function t(t){for(var n=-1,i=t.length;++n<i;)t[n].callback.apply(e,t[n].args)}function n(t){return function(){var n=[].slice.call(arguments);return u?t.apply(e,n):l.push({callback:t,args:n}),e}}var i=e.mode,o=a[i],l=[],u=!1;if(!o)return void e.throwError({type:"init",message:"No actions found for unrecognized player mode: "+i,severity:"fatal"});e.topic("ready").once(function(){u=!0,t(l)}),e.topic("play").subscribe(function(){e.lastPlayedTalkId=e.currentTalk&&e.currentTalk.id}),o.play=function(){var t=o.play,n=!1;return e.topic("ended").subscribe(function(){n=!0}),e.topic("play").subscribe(function(){n=!1}),function(){n&&o.seek(0),t.call(e)}}(),o.playNext=function(){var t=s(e,e.currentTalk.id,1);t&&e.playTalk(t.id)},o.playPrev=function(){var t=s(e,e.currentTalk.id,-1);t&&e.playTalk(t.id)},o.playbackRate=function(t){e.topic("playbackRate").publish(t)},o.volume=function(){var t=o.volume;return function(n){n=Math.round(1e3*+n)/1e3,0>n&&(n=0),n>1&&(n=1),t.call(e,n),e.topic("volume").publishUnique(n)}}(),o.mute=function(){var t=o.mute;return function(n){n=!!n,t.call(e,n),e.topic("muted").publishUnique(n)}}(),o.seek=function(){var t=o.seek,n=0;return e.topic("duration").subscribe(function(e){n=e}),function(i){i=+i,0>i&&(i=0),i>n&&(i=n),t.call(e,i)}}(),o.seek=function(){var t=o.seek,n=!1,i=!1;return e.topic("ready.seekable").once(function(){n!==!1&&t.call(e,n),i=!0}),function(s){i?t.call(e,s):n=s}}(),o.toggle=function(){e.paused?e.play():e.pause()};var c=r(e);o.requestFullScreen=c.requestFullScreen,o.cancelFullScreen=c.cancelFullScreen;for(var h in o)o.hasOwnProperty(h)&&(e[h]=n(o[h]))}}),define("player/addProperties",[],function(){"use strict";function e(){return i.requestFullScreen?!!n.fullscreenEnabled&&"standard":i.mozRequestFullScreen?!!n.mozFullScreenEnabled&&"moz":i.webkitRequestFullScreen?!!n.webkitFullscreenEnabled&&"webkit":i.webkitEnterFullscreen?!!n.webkitFullscreenEnabled&&"webkitVideo":i.msRequestFullscreen?!!n.msFullscreenEnabled&&"ms":!1}function t(){return i.playbackRate&&i.playbackRate===i.defaultPlaybackRate?!0:!1}var n=document,i=n.createElement("video");return function(n){n.fullScreenMode=e(),n.canFullScreen=n.fullScreenMode!==!1,n.mode=n.options.mode,n.talks=n.options.talks,n.canPlaybackRate="hls"===n.mode||"h264"===n.mode?t():!1,n.postrolling=!1,n.paused=!0,n.on("play",function(){n.paused=!1}).on("pause",function(){n.paused=!0})}}),define("player/addPlaybackRate",[],function(){"use strict";var e=1;return function(t){function n(){return t.config.get("playbackRate")}function i(){t._playbackRate(a?e:n())}function s(){a=!1,i()}function r(){a=!0,i()}var a=!1;t.on("ready",function(){t.playbackRate(n())}),t.on("play",i),t.on("prerollStart",r),t.on("postrollStart",r),t.on("prerollComplete",s),t.on("postrollComplete",s),t.on("playbackRate",function(e){t.config.set("playbackRate",e),i()})}}),define("player/addVolume",[],function(){"use strict";return function(e){var t=!1;e.on("ready",function(){e.volume(e.config.get("volume")),e.mute(e.config.get("muted"))}).on("muted",function(n){t=n,e.config.set("muted",n)}).on("volume",function(n){e.config.set("volume",n),n>0&&t&&e.mute(!1)})}}),define("player/augmentTalks",[],function(){"use strict";return function(e){if(!e||!e.length)return[];for(var t,n=e.length,i=n;i--;)t=e[i],t.index=i;return e}}),define("player/addInitPromise",["jquery"],function(e){"use strict";return function(t){var n=new e.Deferred;t.on("error",function(e){n.rejectWith(t,[e])}),t.on("ready",function(){"pending"===n.state()&&n.resolveWith(t,[t])}),e.extend(t,n.promise())}}),define("player/addThrower",["jquery","./handleError"],function(e,t){"use strict";return function(n){var i=!0;n.one("play",function(){i=!1}),n.throwError=function(s){s=e.extend({type:"unknown",message:null,severity:"warning"},s||{}),i&&"fatal"===s.severity&&(s.severity="abortive"),t(e.extend({context:"ted_player_wrapper"},s)),n.topic("error").publish(s)}}}),define("player/Config",["jquery"],function(e){"use strict";function t(e){return!!(e&&e.getItem&&e.setItem&&window.JSON&&JSON.parse&&JSON.stringify)}function n(n,i){if(t(n)){var s=n.getItem(i);if("string"===e.type(s)&&(s=JSON.parse(s),"object"===e.type(s)))return s}return{}}function i(n,i,s){t(n)&&"object"===e.type(s)&&n.setItem(i,JSON.stringify(s))}function s(e){this._options=e,this._inited=!1}return e.extend(s.prototype,{_init:function(){this._inited||(this.internal=e.extend({},this._options.defaults,n(this._options.storageAdapter,this._options.storageProperty)),this._inited=!0)},get:function(e){return this._init(),this.internal[e]},set:function(e,t){this._init(),this.internal[e]=t,i(this._options.storageAdapter,this._options.storageProperty,this.internal)}}),s}),define("player/Player",["jquery","./topicFactory","./replaceElement","./getSupportedMode","./checkRequiredParams","./addHandlers","./addActions","./addProperties","./addPlaybackRate","./addVolume","./augmentTalks","./isLastTalk","./addInitPromise","./addThrower","./Config"],function(e,t,n,i,s,r,a,o,l,u,c,h,p,d,f){"use strict";function g(h){var g=this;this.topic=t({bufferPlayable:void 0,bufferUnplayable:void 0,play:void 0,pause:void 0,prerollStart:void 0,prerollBlock:void 0,postrollStart:void 0,postrollEnd:void 0,adBlock:void 0,seeked:void 0,seeking:void 0}),d(g);var m=!1;this.topic("error").subscribe(function(e){"abortive"===e.severity&&(m=!0)}),p(g),h=e.extend({},b,h),s(h,g.throwError),h.mode=i(h),h.mode||g.throwError({type:"client",message:"Client does not support any player mode.",severity:"fatal"}),h.talks=c(h.talks),h.talks.length||g.throwError({type:"init",message:"No talks sent to player.",severity:"fatal"}),this.options=h,this.config=new f(e.extend({defaults:{languageCode:!1,muted:!1,volume:h.defaultVolume,playbackRate:h.defaultPlaybackRate}},h)),o(this),a(g),u(g),l(g),m||(this.topic("ready.dom").once(function(){window.setTimeout(function(){r(g),g.topic("ready.handlers").once(function(){m||g.topic("ready").publish()})},10)}),n(this))}var m,_=function(){var e=document.createElement("video");return e&&e.defaultPlaybackRate?e.defaultPlaybackRate:1}();try{m=window.localStorage}catch(v){}var b={attrs:{},defaultPlaybackRate:_,defaultVolume:.5,el:null,flashVersion:"11.1.0",nativeLanguage:"en",storageAdapter:m,storageProperty:"playerconfig",swf:"assets/player.swf"};e.extend(g.prototype,{on:function(e,t){return this.topic(e).subscribe(t),this},one:function(e,t){return this.topic(e).once(t),this},isLastTalk:function(){return h(this)}});t();return g}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("spinjs",t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var s=["opacity",t,~~(100*e),n,i].join("-"),r=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-r),e),o=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=o&&"-"+o+"-"||"";return p[s]||(d.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+a+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",d.cssRules.length),p[s]=1),s}function i(e,t){var n,i,s=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<h.length;i++)if(n=h[i]+t,void 0!==s[n])return n;return void 0!==s[t]?t:void 0}function s(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function a(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){return"undefined"==typeof this?new l(e):void(this.opts=r(e||{},l.defaults,f))}function u(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}d.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,i){function r(){return s(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function a(e,a,l){t(p,t(s(r(),{rotation:360/i.lines*e+"deg",left:~~a}),t(s(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:o(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.length+i.width,c=2*u,h=2*-(i.width+i.length)+"px",p=s(r(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)a(l);return t(e,p)},l.prototype.opacity=function(e,t,n,i){var s=e.firstChild;i=i.shadow&&i.lines||0,s&&t+i<s.childNodes.length&&(s=s.childNodes[t+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}}var c,h=["webkit","Moz","ms","O"],p={},d=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},r(l.prototype,{spin:function(t){this.stop();var n,i,r=this,o=r.opts,l=r.el=s(e(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),u=o.radius+o.length+o.width;if(t&&(t.insertBefore(l,t.firstChild||null),i=a(t),n=a(l),s(l,{left:("auto"==o.left?i.x-n.x+(t.offsetWidth>>1):parseInt(o.left,10)+u)+"px",top:("auto"==o.top?i.y-n.y+(t.offsetHeight>>1):parseInt(o.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!c){var h,p=0,d=(o.lines-1)*(1-o.direction)/2,f=o.fps,g=f/o.speed,m=(1-o.opacity)/(g*o.trail/100),_=g/o.lines;!function v(){p++;for(var e=0;e<o.lines;e++)h=Math.max(1-(p+(o.lines-e)*_)%g*m,o.opacity),r.opacity(l,e*o.direction+d,h,o);r.timeout=r.el&&setTimeout(v,~~(1e3/f))}()}return r},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,r){function a(t,n){return s(e(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,u=0,h=(r.lines-1)*(1-r.direction)/2;u<r.lines;u++)l=s(e(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,h+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(l,s(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(l,a(o(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var g=s(e("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?u():c=i(g,"animation"),l}),define("widgets/hover",["jquery","lodash","jqueryui/widget"],function(e,t){"use strict";function n(e,t,n){return Math.abs(e[0]-t[0])>n||Math.abs(e[1]-t[1])>n}function i(e){e._hoverIsTouchTriggered=!1}var s=e(document);e.widget("ted.hover",{options:{hoverIdleDelay:4e3,hoverStartDelay:200,hoverStopDelay:400,hoverSwipeTolerance:5},hoverState:function(e){return t.isUndefined(e)||this._hoverChangeState(null,!!e),this._hoverIsOn},_hoverIsClicking:!1,_hoverIsOn:!1,_hoverIsTouchTriggered:!1,_hoverLastCoords:null,_hoverStartTimeout:null,_hoverIdleTimeout:null,_hoverStopTimeout:null,_hoverChangeStateBound:null,_hoverMoveChangeBound:null,_hoverMouseMoveThrottled:null,_hoverTouchOutBound:null,_create:function(){this._hoverInit()},_hoverEvents:function(){return{mouseenter:this._hoverMouseMoveThrottled,mousemove:this._hoverMouseMoveThrottled,mouseleave:this._hoverOut,touchstart:this._hoverTouchStart,touchend:this._hoverTouchEnd,touchmove:this._hoverTouchMove,touchcancel:this._hoverTouchCancel,mousedown:this._hoverMouseDown,mouseup:this._hoverMouseUp,click:this._hoverMouseClick}},_hoverMove:function(e){this._hoverIsOn?this._hoverMoveChange(e):this._hoverStartSetTimeout(e)},_hoverMoveChange:function(e){var t={x:e.pageX||null,y:e.pageY||null};"mousedown"!==e.type&&"touchstart"!==e.type&&this._hoverLastCoords&&t.x&&t.x===this._hoverLastCoords.x&&t.y===this._hoverLastCoords.y||(this._hoverLastCoords=t,this._hoverChangeState(e,!0),this._hoverIdleSetTimeout(e))},_hoverOut:function(e){this._hoverStartClearTimeout(),this._hoverStopSetTimeout(e)},_hoverMouseClick:function(e){this._hoverIsTouchTriggered||this._hoverIsOn&&this._trigger("tap",e)},_hoverMouseDown:function(){this._hoverIsTouchTriggered||(this._hoverIsClicking=!0,this._hoverIdleClearTimeout())},_hoverMouseMove:function(e){this._hoverIsTouchTriggered||this._hoverMove(e)},_hoverMouseUp:function(e){this._hoverIsTouchTriggered||(this._hoverIsClicking=!1,this._hoverIdleSetTimeout(e))},_hoverTouchStart:function(){this._hoverIsTouchTriggered=!0,this._hoverTouchStartCoords=null,this._hoverTouchEndCoords=null},_hoverTouchEnd:function(e){this._hoverTouchSafetyTimeout&&window.clearTimeout(this._hoverTouchSafetyTimeout),this._hoverTouchSafetyTimeout=t.delay(i,600,this),this._hoverTouchEndCoords&&n(this._hoverTouchStartCoords,this._hoverTouchEndCoords,this.options.hoverSwipeTolerance)||(this._hoverIsOn&&this._trigger("tap",e),this._hoverMoveChange(e))},_hoverTouchCancel:function(e){e.preventDefault()},_hoverTouchMove:function(e){var t=e.originalEvent.touches[0],n=[t.pageX,t.pageY];null===this._hoverTouchStartCoords?this._hoverTouchStartCoords=n:this._hoverTouchEndCoords=n,this._hoverIsOn&&this._hoverMove(e)},_hoverTouchOut:function(t){e(t.target).closest(this.element).length||this._hoverChangeState(t,!1)},_hoverChangeState:function(e,t){t=!!t,this._hoverIdleClearTimeout(),this._hoverStartClearTimeout(),this._hoverStopClearTimeout(),(t||!this._hoverIsClicking)&&t!==this._hoverIsOn&&(this._hoverIsOn=t,this[t?"_hoverStart":"_hoverStop"](e),t?this._on(s,{touchstart:this._hoverTouchOutBound}):this._off(s,"touchstart"))
},_hoverStartSetTimeout:function(e){this._hoverStartTimeout||(this._hoverStartTimeout=t.delay(this._hoverMoveChangeBound,this.options.hoverStartDelay,e))},_hoverStartClearTimeout:function(){this._hoverStartTimeout&&(window.clearTimeout(this._hoverStartTimeout),this._hoverStartTimeout=null)},_hoverStopSetTimeout:function(e){this._hoverStopClearTimeout(),this._hoverStopTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverStopDelay,e,!1)},_hoverStopClearTimeout:function(){this._hoverStopTimeout&&(window.clearTimeout(this._hoverStopTimeout),this._hoverStopTimeout=null)},_hoverIdleSetTimeout:function(e){this._hoverIdleClearTimeout(),!this._hoverIsClicking&&this.options.hoverIdleDelay&&(this._hoverIdleTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverIdleDelay,e,!1))},_hoverIdleClearTimeout:function(){this._hoverIdleTimeout&&(window.clearTimeout(this._hoverIdleTimeout),this._hoverIdleTimeout=null)},_hoverInit:function(){this._hoverChangeStateBound=t.bind(this._hoverChangeState,this),this._hoverMoveChangeBound=t.bind(this._hoverMoveChange,this),this._hoverTouchOutBound=t.bind(this._hoverTouchOut,this),this._hoverMouseMoveThrottled=t.throttle(t.bind(this._hoverMouseMove,this),100,{leading:!0,trailing:!1}),this._on(this._hoverEvents())},_hoverDestroy:function(){this._off(this._hoverEvents())},_hoverStart:function(e){this._trigger("start",e)},_hoverStop:function(e){this._trigger("stop",e)}})}),define("widgets/player",["jquery","lodash","widgets/player/ga-tracker","widgets/player/ted-tracker","widgets/player/cs-tracker","utils/f","utils/is_mobile","utils/query_param","utils/ted","player/Player","lib/pubSub","Cookies","spinjs","jqueryui/widget","widgets/hover","lib/resize"],function(e,t,n,i,s,r,a,o,l,u,c,h,p){"use strict";function d(){return o("playerMode")||null}var f="player",g=f+"--playing",m=f+"--fullscreen",_=f+"--show-cursor",v=f+"__container",b=v+"__cursor-killer",y=v+"__placeholder",k=v+"__video",E=e("<div></div>"),w=t.once(function(n,i){window.onYouTubeIframeAPIReady=t.bind(n,i),e.getScript("//www.youtube.com/iframe_api")});return e.widget("ted.player",e.ted.hover,{options:{breakpoint:!0,currentTalk:null,flashVars:{},metricsKey:null,mode:d(),nativeLanguage:"en",startTrackingAt:0,swf:l("playerPath"),talks:null,hideCursorDelay:1e3,soonThreshold:.1,recordInIdentity:!0},_isPlayerInitialized:!1,_addElements:function(){var e=this.element.find("div."+v);e.length||(e=E.clone().addClass(v).appendTo(this.element));var t=e.find("div."+y);t.length||(t=E.clone().addClass(y).appendTo(e));var n=e.find("div."+b);n.length||(n=E.clone().addClass(b).appendTo(e)),this.elements={container:e,placeholder:t,cursorKiller:n}},_breakpoint:function(e){this.options.breakpoint&&(1024>e?this.video.attr("controls","controls"):this.video.removeAttr("controls"))},_create:function(){this.options.currentTalk||(this.options.currentTalk=this.options.talks[0]),this._on({playerplay:function(){this.element.addClass(g)},playerpause:function(){this.element.removeClass(g)}}),this._isInternal=!this.talk().external,this.options.hoverStopDelay=this.options.hideCursorDelay,new n(this),new i(this),new s(this),this._initializePlayer()},_initializePlayer:function(){this._isPlayerInitialized||(this._isPlayerInitialized=!0,this.element.addClass(f),this._addElements(),this._isInternal?this._initializeInternalPlayer():"YouTube"===this.talk().external.service&&this._initializeYouTubePlayer(),this._hoverInit())},_initializeYouTubePlayer:function(){w(this._youTubeApiReady,this),this._on({playerrequestplay:function(){this._ytPlayer&&this._ytPlayer.playVideo&&this._ytPlayer.playVideo()}})},_youTubeApiReady:function(){var t=this,n=this.talk(),i="//www.youtube.com/embed/"+n.external.code+"?enablejsapi=1&autoplay=0&origin="+location.origin;n.external.startTime&&(i+="&start="+n.external.startTime);var s=e("<iframe class="+k+" src="+i+" frameborder=0 allowfullscreen></iframe>");t.elements.placeholder.replaceWith(s),t._ytPlayer=new YT.Player(s.get(0),{events:{}}),t._trigger("domready")},_initializeInternalPlayer:function(){var n=o("dfptest");this.options.talks=this.options.talks.map(function(e){if(n){var t=encodeURIComponent(n);e.resources.hls.adUrl=e.resources.hls.adUrl.replace(/(cust_params=[^&]+)&/,"$1%26dfptest%3D"+t+"&")}return e.introDuration=Math.min(e.introDuration,11.82),e.adDuration=0==e.introDuration?0:3.33,e}),this.player=new u({attrs:{"class":k},el:this.elements.placeholder.get(0),flashVars:this.options.flashVars,metricsKey:this.options.metricsKey,mode:this.options.mode,nativeLanguage:this.options.nativeLanguage,swf:this.options.swf,talks:this.options.talks,shareToken:this.options.shareToken}),this.element.addClass(f+"--"+this.mode()),a()&&this.element.addClass(f+"--is-mobile"),this._subscribeToPlayerEvents(),this.player.one("ready.dom",t.bind(this._playerDomReady,this)),this.player.canFullScreen&&(this.player.on("enterFullScreen",t.bind(this._playerEnterFullScreen,this)),this.player.on("exitFullScreen",t.bind(this._playerExitFullScreen,this))),this.player.on("talk",t.bind(function(e){this.options.currentTalk=e,this._trigger("talk",null,e)},this)),this.player.on("bufferUnplayable",t.bind(this._bufferingStarted,this)),this.player.on("bufferPlayable",t.bind(this._bufferingStopped,this)),this._on({playerplaybackrate:function(e,t){this._playbackRate=t.playbackRate},playervolume:function(e,t){this._volume=t.volume},playerprogress:function(){var e;return function(t,n){!e&&n.progress>1-this.options.soonThreshold&&this.player.isLastTalk()&&(e=!0,this._trigger("soon"))}}(),playerpostrollcomplete:function(){this.player.isLastTalk()&&!this._queuedTalkId&&(this._queuedTalkId=this.options.currentTalk.id)},playerrequestplay:function(){this._queuedTalkId?(e(this.player.el).attr("preload",""),this.player.playTalk(this._queuedTalkId),this._queuedTalkId=null,t.delay(r(this.player,"play"))):this.player.play()},playerrequestpause:function(){this.player.postrolling||this.player.pause()}})},_destroy:function(){this.options.breakpoint&&c("breakpoint").unsubscribe(this._breakpoint)},_playerDomReady:function(){this.video=e(this.player.el),this.options.breakpoint&&c("breakpoint").subscribe(t.bind(this._breakpoint,this)),this._trigger("domready")},_playerEnterFullScreen:function(){this.element.addClass(m)},_playerExitFullScreen:function(){this.element.removeClass(m)},_subscribeToPlayerEvents:function(){var e,n=this;this._on({playerrequestplay:function(){e=!0},playerplay:function(){e=!1}}),t.forEach(["ad","currentTime","duration","ended","enterFullScreen","error","exitFullScreen","pause","play","progress","ready","seeked","seeking","volume","muted","idle","complete","talkComplete","prerollStart","prerollBlock","postrollStart","postrollComplete","postrollDuration","postrollRemaining","adBlock","bufferPlayable","bufferUnplayable","subtitle","playbackRate","metricsData","metricsToggle"],function(t){n.player.on(t,function(i){var s={};"play"!==t||e||n._trigger("requestplay"),s[t]=i,n._trigger(t,null,s),n["_"+t]=i})})},_hoverStart:function(e){this.element.addClass(_),this._trigger("hoverstart",e)},_hoverStop:function(e){this.element.removeClass(_),this._trigger("hoverstop",e)},_bufferingStarted:function(){this._spinner||(this._spinner=new p({lines:13,length:13,width:5,radius:16,color:"#FFF",trail:50,shadow:!0})),this._spinner.spin(this.element.get(0))},_bufferingStopped:function(){this._spinner.stop()},mode:function(){return this._isInternal?this.player.options.mode:"external"},talk:function(e){return arguments.length&&(this.queue(e),this._trigger("requestplay")),this.options.currentTalk},talks:function(){return this.player.talks},play:function(){this._trigger("requestplay")},playNext:function(){this._trigger("requestnext"),this.player.playNext()},playPrev:function(){this._trigger("requestprev"),this.player.playPrev()},pause:function(){this._trigger("requestpause")},_playbackRate:null,playbackRate:function(e){return arguments.length&&(this.player.playbackRate(e),this._playbackRate=e),this._playbackRate},queue:function(e){this._queuedTalkId=e},sendAds:function(e){this.player.sendAds(e)},seek:function(e,t){this.options.startTrackingAt=t?e:0,this.player.seek(e)},_subtitle:null,subtitle:function(e){if(arguments.length){var n=e?t.find(this.talk().languages,{languageCode:e}):!1;this.player.subtitle(e),this._subtitle=n}return this._subtitle},_volume:null,volume:function(e){return arguments.length&&this.player.volume(e),this._volume},_muted:null,mute:function(e){return arguments.length&&this.player.mute(e),this._muted},toggleFullScreen:function(){var t=e("html,body"),n=e(document).scrollTop(),i=e(this.element).offset().top;n>i&&t.scrollTop(i),this[this.player.isFullScreen?"cancelFullScreen":"requestFullScreen"](this.elements.container.get(0))},requestFullScreen:function(e){this.player.requestFullScreen(e)},cancelFullScreen:function(e){this.player.cancelFullScreen(e)},isControllable:function(){return this._isInternal},isFullScreen:function(){return this._isInternal?this.player.isFullScreen:!1},canFullScreen:function(){return this._isInternal?this.player.canFullScreen:!1},canPlaybackRate:function(){return this._isInternal?this.player.canPlaybackRate:!1},capQualityToStage:function(e){this.player.capQualityToStage(e)}}),function(t,n){return e(t).player(n)}}),define("apps/embeddable/views/player",["jquery","lodash","./base","utils/is_mobile","hbs!apps/embeddable/templates/player","widgets/player"],function(e,t,n,i,s){"use strict";var r=n.extend({play:function(){this.state.set("activated",!0),this.$player.player("play")},pause:function(){this.$player.player("pause")},talk:function(e){this.$player.player("talk",e.get("id"))},mute:function(){this.$player.player("mute",!0)},unmute:function(){this.$player.player("mute",!1)},volume:function(e){this.$player.player("volume",e)},subtitle:function(e){this.$player.player("subtitle",e)},fullscreen:function(){this.$player.player("requestFullScreen",this.fullscreenElement||this.el)},smallscreen:function(){this.$player.player("cancelFullScreen",this.fullscreenElement||this.el)},seek:function(e){this.$player.player("seek",e)},fullscreenElement:null,className:"Embeddable__player",events:{playererror:function(e,t){var n=t.error,i="client"===n.type?"client":null;"abortive"===n.severity&&this.state.set("error",i||"init"),"fatal"===n.severity&&this.state.set("error",i||"fatal")},playerready:function(){this.state.set("ready",!0),this._checkCapabilities()},playerplay:function(){this.state.set("playing",!0),this.state.set("paused",!1)},playerpause:function(){this.state.set("paused",!0),this.state.set("playing",!1)},playerduration:function(e,t){var n=this.$player.player("talk").id,i=this.talks.get(n);i.set("duration",t.duration),this.state.set("duration",t.duration)},playercurrenttime:function(e,t){this.state.set("currentTime",t.currentTime)},playertalk:function(e,t){this.state.set("talk",this.talks.get(t.id))},playerended:function(){this.state.set("paused",!1),this.state.set("playing",!1)},playervolume:function(e,t){this.state.set("volume",t.volume)},playermuted:function(e,t){this.state.set("muted",t.muted)},playersubtitle:function(e,t){this.state.set("subtitle",t&&t.subtitle&&t.subtitle.languageCode)},playerenterfullscreen:function(){this.state.set("fullscreen",!0)},playerexitfullscreen:function(){this.state.set("fullscreen",!1)}},propsDefaults:{defaultSubtitleLanguage:"en"},stateDefaults:{nativeControls:!1,activated:!1,error:!1,ready:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1},stateEvents:{"change:nativeControls":function(e,t){t?this.find("video").attr("controls","controls"):this.find("video").removeAttr("controls")},"on:activated":function(){this.$el.addClass("Embeddable__player--activated")}},initialize:function(e){this.talks=e.talks,this.fullscreenElement=e.fullscreenElement||null,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(s()),this.$player=this.$el.find("div.Embeddable__player__object"),this.$player.player({breakpoint:!1,nativeLanguage:this.props.get("defaultSubtitleLanguage"),talks:this.talks.toPlayer(),recordInIdentity:!1}),this},_canFullscreen:function(){return this.$player.player("canFullScreen")?i()?!1:!0:!1},_checkCapabilities:function(){var e=this._canFullscreen(),t=this.$player.player("mode");this.state.set("canFullscreen",e),this.state.set("canVolume","flash"==t),this.state.set("canSubtitle","flash"==t),"flash"==t||e||this.state.set("nativeControls",!0)}});return r}),define("apps/embeddable/views/canonball",["./base"],function(e){"use strict";var t=e.extend({className:"Embeddable__canonball ted-logo",tagName:"a",attributes:{href:"#",target:"_blank"},propsDefaults:{enabled:!1,visible:!1,url:"http://www.ted.com/"},propsEvents:{"change:url":"render","change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--visible")}},render:function(){this.$el.attr("href",this.props.get("url"))}});return t}),define("apps/embeddable/app",["jquery","lodash","lib/ads","hbs!apps/embeddable/templates/error","apps/embeddable/collections/talks","apps/embeddable/views/chrome","apps/embeddable/views/player","apps/embeddable/views/canonball","widgets/hover"],function(e,t,n,i,s,r,a,o){function l(t){function n(){p.props.set("enabled",h.props.get("activated")),p.props.set("visible",h.props.get("hovering")&&!h.props.get("fullscreen"))}var l=e(t.el),u=new s(t.talks),c=new a({fullscreenElement:t.el,talks:u}),h=new r({talks:u}),p=new o;c.props.set("defaultSubtitleLanguage",t.subtitleLang),p.props.set("url",t.canonicalUrl),c.state.on("change:error",function(e,n){l.html(i({isClient:"client"===n,isInit:"init"===n,isFatal:"fatal"===n,url:t.canonicalUrl}))}),c.state.on("change:nativeControls",function(e,t){h.props.set("enabled",!t)}),c.state.on("change:activated",function(e,t){l.addClass("Embeddable--activated"),l.removeClass("Embeddable--activating"),h.props.set("activated",t)}),c.state.on("change:playing",function(e,t){h.props.set("playing",t)}),c.state.on("change:paused",function(e,t){h.props.set("paused",t)}),c.state.on("change:duration",function(e,t){h.props.set("duration",t)}),c.state.on("change:currentTime",function(e,t){h.props.set("currentTime",t)}),c.state.on("change:talk",function(e,t){h.props.set("talk",t),h.props.set("next",u.after(t)||null),h.props.set("prev",u.before(t)||null)}),c.state.on("change:volume",function(e,t){h.props.set("volume",t)}),c.state.on("change:canVolume",function(e,t){h.props.set("canVolume",t)}),c.state.on("change:muted",function(e,t){h.props.set("muted",t)}),c.state.on("change:subtitle",function(e,t){h.props.set("subtitle",t)}),c.state.on("change:canSubtitle",function(e,t){h.props.set("canSubtitle",t)}),c.state.on("change:fullscreen",function(e,t){h.props.set("fullscreen",t)}),c.state.on("change:canFullscreen",function(e,t){h.props.set("canFullscreen",t)}),h.state.on("change:playPending",function(e,t){t&&c.play()}),h.state.on("change:pausePending",function(e,t){t&&c.pause()}),h.state.on("change:pendingTalk",function(e,t){t&&c.talk(t)}),h.state.on("change:mutePending",function(e,t){t&&c.mute()}),h.state.on("change:unmutePending",function(e,t){t&&c.unmute()}),h.state.on("change:pendingVolume",function(e,t){null!=t&&c.volume(t)}),h.state.on("change:pendingSubtitle",function(e,t){null!==t&&c.subtitle(t?t:!1)}),h.state.on("change:fullscreenPending",function(e,t){t&&c.fullscreen()}),h.state.on("change:smallscreenPending",function(e,t){t&&c.smallscreen()}),h.state.on("change:pendingSeek",function(e,t){null!=t&&c.seek(t)}),h.props.on("change:activated",n),h.props.on("change:hovering",n),h.props.on("change:fullscreen",n),l.hover().on("hoverstart",function(){h.props.set("hovering",!0)}).on("hoverstop",function(){h.props.set("hovering",!1)}),this.$el=l,this.talks=u,this.player=c,this.chrome=h,this.canonball=p}return t.extend(l.prototype,{activate:function(){this.$el.addClass("Embeddable--activating"),this.player.play()},render:function(){this.$el.prepend(this.player.$el),this.$el.append(this.canonball.$el),this.$el.append(this.chrome.$el),this.chrome.render(),this.player.render(),n.initPlayer(this.player.$player)}}),l.init=function(e){var n=new l({el:e.el,canonicalUrl:e.canonicalUrl,subtitleLang:e.subtitleLang,talks:e.talks});n.$el.data("embeddable",n),n.render(),n.player.state.once("change:ready",function(){window[e.activate]=t.once(function(){n.activate()}),n.$el.hasClass("Embeddable--activating")&&window[e.activate]()})},l}),define("embed",["dq","apps/embeddable/app","lib/ads"],function(e,t,n){"use strict";e({q:window._q,modules:{embeddable:t}}),e({q:window._g,modules:{ads:n}})})}();
//# sourceMappingURL=embed.js
//# sourceMappingURL=embed.js.map